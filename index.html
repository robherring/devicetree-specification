
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Devicetree Specification v0.1-83-ge7d71a6 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="shortcut icon" href="_static/devicetree-favicon.png"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="welcome-to-devicetree-specification-s-documentation">
<h1>Welcome to Devicetree Specification’s documentation!<a class="headerlink" href="#welcome-to-devicetree-specification-s-documentation" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<span id="document-license"></span><p><strong>Copyright</strong></p>
<div class="line-block">
<div class="line">Copyright 2008,2011 Power.org, Inc.</div>
<div class="line">Copyright 2008,2011 Freescale Semiconductor, Inc.</div>
<div class="line">Copyright 2008,2011 International Business Machines Corporation.</div>
<div class="line">Copyright 2016,2017 Linaro, Ltd.</div>
<div class="line">Copyright 2016,2017 Arm, Ltd.</div>
</div>
<p>The Linaro and devicetree.org word marks and the Linaro and
devicetree.org logos and related marks are trademarks and service marks
licensed by Linaro Ltd. Implementation of certain elements of this
document may require licenses under third party intellectual property
rights, including without limitation, patent rights. Linaro and its
Members are not, and shall not be held, responsible in any manner for
identifying or failing to identify any or all such third party
intellectual property rights.</p>
<p>The Power Architecture and Power.org word marks and the Power and
Power.org logos and related marks are trademarks and service marks
licensed by Power.org. Implementation of certain elements of this
document may require licenses under third party intellectual property
rights, including without limitation, patent rights. Power.org and its
Members are not, and shall not be held, responsible in any manner for
identifying or failing to identify any or all such third party
intellectual property rights.</p>
<p>THIS SPECIFICATION PROVIDED “AS IS” AND WITHOUT ANY WARRANTY
OF ANY KIND, INCLUDING, WITHOUT LIMITATION, ANY EXPRESS OR IMPLIED
WARRANTY OF NON-INFRINGEMENT, MERCHANTABILITY OR FITNESS FOR A
PARTICULAR PURPOSE. IN NO EVENT SHALL LINARO OR ANY MEMBER OF
LINARO BE LIABLE FOR ANY DIRECT, INDIRECT, SPECIAL, EXEMPLARY,
PUNITIVE, OR CONSEQUENTIAL DAMAGES, INCLUDING, WITHOUT LIMITATION, LOST
PROFITS, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.</p>
<p>Questions pertaining to this document, or the terms or conditions of its
provision, should be addressed to:</p>
<div class="line-block">
<div class="line">Linaro, Ltd</div>
<div class="line">Harston Mill,</div>
<div class="line">Royston Road,</div>
<div class="line">Harston CB22 7GG</div>
<div class="line">Attn: Devicetree.org Board Secretary</div>
</div>
<p><strong>License Information</strong></p>
<p>Licensed under the Apache License, Version 2.0 (the “License”);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
<p><a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
<span id="document-acknowledgements"></span><p><strong>Acknowledgements</strong></p>
<p>The devicetree.org Technical Steering Committee would like to
thank the many individuals and companies that contributed to the
development of this specification through writing, technical discussions
and reviews.</p>
<p>We want to thank the power.org Platform Architecture Technical Subcommittee who
developed and published ePAPR. The text of ePAPR was used as the starting
point for this document.</p>
<p>Significant aspects of the Devicetree Specification are based on work done by
the Open Firmware Working Group which developed bindings for IEEE-1275.
We would like to acknowledge their contributions.</p>
<p>We would also like to acknowledge the contribution of the PowerPC and ARM Linux
communities that developed and implemented the flattened devicetree concept.</p>
<span id="document-revhistory"></span><table border="1" class="docutils" id="id1">
<caption><span class="caption-number">Table 1 </span><span class="caption-text">Revision History</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="13%" />
<col width="15%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Revision</th>
<th class="head">Date</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0.1</td>
<td>2016-MAY-24</td>
<td>Initial prerelease version. Imported ePAPR text
into reStructured Text format and removed Power ISA
specific elements.</td>
</tr>
<tr class="row-odd"><td>0.2</td>
<td>2017-DEC-20</td>
<td><ul class="first last simple">
<li>Added more recommended generic node names</li>
<li>Added interrupts-extended</li>
<li>Additional phy times</li>
<li>Filled out detail in source language chapter</li>
<li>Editorial changes</li>
<li>Added changebar version to release documents</li>
</ul>
</td>
</tr>
</tbody>
</table>
<span id="document-introduction"></span><div class="section" id="introduction">
<span id="chapter-introduction"></span><h2>1. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<div class="section" id="purpose-and-scope">
<h3>1.1. Purpose and Scope<a class="headerlink" href="#purpose-and-scope" title="Permalink to this headline">¶</a></h3>
<p>To initialize and boot a computer system, various software components
interact. Firmware might perform low-level initialization of the system
hardware before passing control to software such as an operating system,
bootloader, or hypervisor. Bootloaders and hypervisors can, in turn,
load and transfer control to operating systems. Standard, consistent
interfaces and conventions facilitate the interactions between these
software components.  In this document the term <em>boot program</em> is used to
generically refer to a software component that initializes the system
state and executes another software component referred to as a <em>client
program</em>. Examples of a boot program include: firmware, bootloaders, and
hypervisors. Examples of a client program include: bootloaders,
hypervisors, operating systems, and special purpose programs. A piece of
software may be both a client program and a boot program  (e.g. a hypervisor).</p>
<p>This specification, the Devicetree Specification (DTSpec),
provides a complete boot program to client program
interface definition, combined with minimum system requirements that
facilitate the development of a wide variety of systems.</p>
<p>This specification is targeted towards the requirements of embedded
systems. An embedded system typically consists of system hardware, an
operating system, and application software that are custom designed to
perform a fixed, specific set of tasks. This is unlike general purpose
computers, which are designed to be customized by a user with a variety
of software and I/O devices. Other characteristics of embedded systems
may include:</p>
<ul class="simple">
<li>a fixed set of I/O devices, possibly highly customized for the
application</li>
<li>a system board optimized for size and cost</li>
<li>limited user interface</li>
<li>resource constraints like limited memory and limited nonvolatile storage</li>
<li>real-time constraints</li>
<li>use of a wide variety of operating systems, including Linux,
real-time operating systems, and custom or proprietary operating
systems</li>
</ul>
<p><strong>Organization of this Document</strong></p>
<ul class="simple">
<li>Chapter <a class="reference internal" href="#chapter-introduction"><span class="std std-ref">1</span></a> introduces the architecture being
specified by DTSpec.</li>
<li>Chapter <a class="reference internal" href="index.html#chapter-devicetree"><span class="std std-ref">2</span></a> introduces the devicetree concept
and describes its logical structure and standard properties.</li>
<li>Chapter <a class="reference internal" href="index.html#chapter-device-node-requirements"><span class="std std-ref">3</span></a> specifies the
definition of a base set of device nodes required by DTSpec-compliant
devicetrees.</li>
<li>Chapter <a class="reference internal" href="index.html#chapter-device-bindings"><span class="std std-ref">4</span></a> describes device bindings for
certain classes of devices and specific device types.</li>
<li>Chapter <a class="reference internal" href="index.html#chapter-fdt-structure"><span class="std std-ref">5</span></a> specifies the DTB encoding of devicetrees.</li>
<li>Chapter <a class="reference internal" href="index.html#chapter-devicetree-source-format"><span class="std std-ref">6</span></a> specifies the DTS source language.</li>
</ul>
<p><strong>Conventions Used in this Document</strong></p>
<p>The word <em>shall</em> is used to indicate mandatory requirements strictly to
be followed in order to conform to the standard and from which no
deviation is permitted (<em>shall</em> equals <em>is required to</em>).</p>
<p>The word <em>should</em> is used to indicate that among several possibilities
one is recommended as particularly suitable, without mentioning or
excluding others; or that a certain course of action is preferred but
not necessarily required; or that (in the negative form) a certain
course of action is deprecated but not prohibited (<em>should</em> equals <em>is
recommended that</em>).</p>
<p>The word <em>may</em> is used to indicate a course of action permissible within
the limits of the standard (<em>may</em> equals <em>is permitted</em>).</p>
<p>Examples of devicetree constructs are frequently shown in <em>Devicetree
Syntax</em> form. See section <a class="reference internal" href="index.html#chapter-devicetree-source-format"><span class="std std-ref">6</span></a> for
an overview of this syntax.</p>
</div>
<div class="section" id="relationship-to-ieee-1275-and-epapr">
<h3>1.2. Relationship to IEEE™ 1275 and ePAPR<a class="headerlink" href="#relationship-to-ieee-1275-and-epapr" title="Permalink to this headline">¶</a></h3>
<p>DTSpec is loosely related to the IEEE 1275 Open Firmware
standard—<em>IEEE Standard for Boot (Initialization Configuration)
Firmware: Core Requirements and Practices</em> <a class="reference internal" href="index.html#ieee1275" id="id1">[IEEE1275]</a>.</p>
<p>The original IEEE 1275 specification and its derivatives such as CHRP <a class="reference internal" href="index.html#chrp" id="id2">[CHRP]</a>
and PAPR <a class="reference internal" href="index.html#papr" id="id3">[PAPR]</a> address problems of general purpose computers, such as how a
single version of an operating system can work on several different
computers within the same family and the problem of loading an operating
system from user-installed I/O devices.</p>
<p>Because of the nature of embedded systems, some of these problems faced
by open, general purpose computers do not apply. Notable features of the
IEEE 1275 specification that are omitted from the DTSpec include:</p>
<ul class="simple">
<li>Plug-in device drivers</li>
<li>FCode</li>
<li>The programmable Open Firmware user interface based on Forth</li>
<li>FCode debugging</li>
<li>Operating system debugging</li>
</ul>
<p>What is retained from IEEE 1275 are concepts from the devicetree
architecture by which a boot program can describe and communicate system
hardware information to a client program, thus eliminating the need for
the client program to have hard-coded descriptions of system hardware.</p>
<p>This specification partially supersedes the ePAPR <a class="reference internal" href="index.html#epapr" id="id4">[EPAPR]</a> specification.
ePAPR documents how devicetree is used by the Power ISA, and covers both
general concepts, as well as Power ISA specific bindings.
The text of this document was derived from ePAPR, but either removes architecture specific bindings, or moves them into an appendix.</p>
</div>
<div class="section" id="bit-and-64-bit-support">
<h3>1.3. 32-bit and 64-bit Support<a class="headerlink" href="#bit-and-64-bit-support" title="Permalink to this headline">¶</a></h3>
<p>The DTSpec supports CPUs with both 32-bit and 64-bit addressing
capabilities. Where applicable, sections of the DTSpec describe any
requirements or considerations for 32-bit and 64-bit addressing.</p>
</div>
<div class="section" id="definition-of-terms">
<h3>1.4. Definition of Terms<a class="headerlink" href="#definition-of-terms" title="Permalink to this headline">¶</a></h3>
<dl class="glossary docutils">
<dt id="term-amp">AMP</dt>
<dd>Asymmetric Multiprocessing. Computer available CPUs are partitioned into
groups, each running a distinct operating system image. The CPUs
may or may not be identical.</dd>
<dt id="term-boot-cpu">boot CPU</dt>
<dd>The first CPU which a boot program directs to a client program’s
entry point.</dd>
<dt id="term-book-iii-e">Book III-E</dt>
<dd>Embedded Environment. Section of the Power ISA defining supervisor
instructions and related facilities used in embedded Power processor
implementations.</dd>
<dt id="term-boot-program">boot program</dt>
<dd>Used to generically refer to a software component that initializes
the system state and executes another software component referred to
as a client program. Examples of a boot program include: firmware,
bootloaders, and hypervisors.</dd>
<dt id="term-client-program">client program</dt>
<dd>Program that typically contains application or operating system
software. Examples of a client program include: bootloaders,
hypervisors, operating systems, and special purpose programs.</dd>
<dt id="term-cell">cell</dt>
<dd>A unit of information consisting of 32 bits.</dd>
<dt id="term-dma">DMA</dt>
<dd>Direct memory access</dd>
<dt id="term-dtb">DTB</dt>
<dd>Devicetree blob. Compact binary representation of the devicetree.</dd>
<dt id="term-dtc">DTC</dt>
<dd>Devicetree compiler. An open source tool used to create DTB files
from DTS files.</dd>
<dt id="term-dts">DTS</dt>
<dd>Devicetree syntax. A textual representation of a devicetree
consumed by the DTC. See Appendix A Devicetree Source Format
(version 1).</dd>
<dt id="term-effective-address">effective address</dt>
<dd>Memory address as computed by processor storage access or branch
instruction.</dd>
<dt id="term-physical-address">physical address</dt>
<dd>Address used by the processor to access external device, typically a
memory controller.</dd>
<dt id="term-power-isa">Power ISA</dt>
<dd>Power Instruction Set Architecture.</dd>
<dt id="term-interrupt-specifier">interrupt specifier</dt>
<dd>A property value that describes an interrupt. Typically information
that specifies an interrupt number and sensitivity and triggering
mechanism is included.</dd>
<dt id="term-secondary-cpu">secondary CPU</dt>
<dd>CPUs other than the boot CPU that belong to the client program are
considered <em>secondary CPUs</em>.</dd>
<dt id="term-smp">SMP</dt>
<dd>Symmetric multiprocessing. A computer architecture where two or more
identical CPUs can share memory and IO and operate under a single operating
system.</dd>
<dt id="term-soc">SoC</dt>
<dd>System on a chip. A single computer chip integrating one or more CPU
core as well as number of other peripherals.</dd>
<dt id="term-unit-address">unit address</dt>
<dd>The part of a node name specifying the node’s address in the address
space of the parent node.</dd>
<dt id="term-quiescent-cpu">quiescent CPU</dt>
<dd>A quiescent CPU is in a state where it cannot interfere with the
normal operation of other CPUs, nor can its state be affected by the
normal operation of other running CPUs, except by an explicit method
for enabling or re-enabling the quiescent CPU.</dd>
</dl>
</div>
</div>
<span id="document-devicetree-basics"></span><div class="section" id="the-devicetree">
<span id="chapter-devicetree"></span><h2>2. The Devicetree<a class="headerlink" href="#the-devicetree" title="Permalink to this headline">¶</a></h2>
<div class="section" id="overview">
<h3>2.1. Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h3>
<p>DTSpec specifies a construct called a <em>devicetree</em> to describe
system hardware. A boot program loads a devicetree into a client
program’s memory and passes a pointer to the devicetree to the client.</p>
<p>This chapter describes the logical structure of the devicetree and
specifies a base set of properties for use in describing device nodes.
Chapter <a class="reference internal" href="index.html#chapter-device-node-requirements"><span class="std std-ref">3</span></a> specifies certain device nodes
required by a DTSpec-compliant
devicetree. Chapter <a class="reference internal" href="index.html#chapter-device-bindings"><span class="std std-ref">4</span></a> describes the
DTSpec-defined device bindings – the requirements for representing
certain device types or classes of devices.
Chapter <a class="reference internal" href="index.html#chapter-fdt-structure"><span class="std std-ref">5</span></a> describes the in-memory encoding of the devicetree.</p>
<p>A devicetree is a tree data structure with nodes that describe the
devices in a system. Each node has property/value pairs that describe
the characteristics of the device being represented. Each node has
exactly one parent except for the root node, which has no parent.</p>
<p>A DTSpec-compliant devicetree describes device information in a system
that cannot necessarily be dynamically detected by a client program. For
example, the architecture of PCI enables a client to probe and detect
attached devices, and thus devicetree nodes describing PCI devices
might not be required. However, a device node is required to describe a
PCI host bridge device in the system if it cannot be detected by
probing.</p>
<p><strong>Example</strong></p>
<p><a class="reference internal" href="#example-simple-devicetree"><span class="std std-numref">Fig. 2.1</span></a> shows an example representation of a
simple devicetree that is nearly
complete enough to boot a simple operating system, with the platform
type, CPU, memory and a single UART described. Device nodes are shown
with properties and values inside each node.</p>
<div class="figure" id="id3">
<span id="example-simple-devicetree"></span><div class="graphviz"><img src="_images/graphviz-58c8267ade85edeca7b1b0299af2b1e473987ddc.png" alt="digraph tree {
rankdir = LR;
ranksep = equally;
size = &quot;6,8&quot;
node [ shape=&quot;Mrecord&quot;; width=&quot;3.5&quot;; fontname = Courier; ];

&quot;/&quot; [ label = &quot;\N |
model=\&quot;fsl,mpc8572ds\&quot;\l
compatible=\&quot;fsl,mpc8572ds\&quot;\l
#address-cells=\&lt;1\&gt;\l
#size-cells=\&lt;1\&gt;\l&quot;]

&quot;cpus&quot; [ label=&quot;\N |
#address-cells=\&lt;1\&gt;\l
#size-cells=\&lt;0\&gt;\l&quot;]

&quot;cpu&#64;0&quot; [ label=&quot;\N |
device_type=\&quot;cpu\&quot;\l
reg=\&lt;0\&gt;\l
timebase-frequency=\&lt;825000000\&gt;\l
clock-frequency=\&lt;825000000\&gt;\l&quot;]

&quot;cpu&#64;1&quot; [ label=&quot;\N |
device_type=\&quot;cpu\&quot;\l
reg=\&lt;1\&gt;\l
timebase-frequency=\&lt;825000000\&gt;\l
clock-frequency=\&lt;825000000\&gt;\l&quot;]

&quot;memory&#64;0&quot; [ label=&quot;\N |
device_type=\&quot;memory\&quot;\l
reg=\&lt;0 0x20000000\&gt;\l&quot;]

&quot;uart&#64;fe001000&quot; [ label=&quot;\N |
compatible=\&quot;ns16550\&quot;\l
reg=\&lt;0xfe001000 0x100\&gt;\l&quot;]

&quot;chosen&quot; [ label=&quot;\N |
bootargs=\&quot;root=/dev/sda2\&quot;\l&quot;]

&quot;aliases&quot; [ label=&quot;\N |
serial0=\&quot;/uart&#64;fe001000\&quot;\l&quot;]

&quot;/&quot;:e    -&gt; &quot;cpus&quot;:w
&quot;cpus&quot;:e -&gt; &quot;cpu&#64;0&quot;:w
&quot;cpus&quot;:e -&gt; &quot;cpu&#64;1&quot;:w
&quot;/&quot;:e    -&gt; &quot;memory&#64;0&quot;:w
&quot;/&quot;:e    -&gt; &quot;uart&#64;fe001000&quot;:w
&quot;/&quot;:e    -&gt; &quot;chosen&quot;:w
&quot;/&quot;:e    -&gt; &quot;aliases&quot;:w
}" class="graphviz" /></div>
<p class="caption"><span class="caption-number">Fig. 2.1 </span><span class="caption-text">Devicetree Example</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="devicetree-structure-and-conventions">
<h3>2.2. Devicetree Structure and Conventions<a class="headerlink" href="#devicetree-structure-and-conventions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="node-names">
<span id="sect-node-names"></span><h4>2.2.1. Node Names<a class="headerlink" href="#node-names" title="Permalink to this headline">¶</a></h4>
<div class="section" id="node-name-requirements">
<h5>2.2.1.1. Node Name Requirements<a class="headerlink" href="#node-name-requirements" title="Permalink to this headline">¶</a></h5>
<p>Each node in the devicetree is named according to the following
convention:</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">node-name&#64;unit-address</span></code></div></blockquote>
<p>The <em>node-name</em> component specifies the name of the node. It shall be 1
to 31 characters in length and consist solely of characters from the set
of characters in <a class="reference internal" href="#node-name-characters"><span class="std std-numref">Table 2.1</span></a>.</p>
<span id="node-name-characters"></span><table border="1" class="docutils" id="id4">
<caption><span class="caption-number">Table 2.1 </span><span class="caption-text">Valid characters for node names</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Character</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">0-9</span></code></td>
<td>digit</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">a-z</span></code></td>
<td>lowercase letter</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">A-Z</span></code></td>
<td>uppercase letter</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">,</span></code></td>
<td>comma</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">.</span></code></td>
<td>period</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">_</span></code></td>
<td>underscore</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">+</span></code></td>
<td>plus sign</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">-</span></code></td>
<td>dash</td>
</tr>
</tbody>
</table>
<p>The <em>node-name</em> shall start with a lower or uppercase character and
should describe the general class of device.</p>
<p>The <em>unit-address</em> component of the name is specific to the bus type on
which the node sits. It consists of one or more ASCII characters from
the set of characters in <a class="reference internal" href="#node-name-characters"><span class="std std-numref">Table 2.1</span></a>. The
unit-address must match the first
address specified in the <em>reg</em> property of the node. If the node has no
<em>reg</em> property, the <em>&#64;unit-address</em> must be omitted and the
<em>node-name</em> alone differentiates the node from other nodes at the same
level in the tree. The binding for a particular bus may specify
additional, more specific requirements for the format of <em>reg</em> and the
<em>unit-address</em>.</p>
<p>The root node does not have a node-name or unit-address. It is
identified by a forward slash (/).</p>
<div class="figure" id="id5">
<span id="example-nodenames"></span><div class="graphviz"><img src="_images/graphviz-96d4d843650908846790f318227ab351de33e252.png" alt="digraph tree {
rankdir = LR;
ranksep = equally;
size = &quot;6,8&quot;
node [ shape=&quot;Mrecord&quot;; width=&quot;2.5&quot;; fontname = Courier; ];

&quot;/&quot;:e    -&gt; &quot;cpus&quot;:w
&quot;cpus&quot;:e -&gt; &quot;cpu&#64;0&quot;:w
&quot;cpus&quot;:e -&gt; &quot;cpu&#64;1&quot;:w
&quot;/&quot;:e    -&gt; &quot;memory&#64;0&quot;:w
&quot;/&quot;:e    -&gt; &quot;uart&#64;fe001000&quot;:w
&quot;/&quot;:e    -&gt; &quot;ethernet&#64;fe002000&quot;:w
&quot;/&quot;:e    -&gt; &quot;ethernet&#64;fe003000&quot;:w
}" class="graphviz" /></div>
<p class="caption"><span class="caption-number">Fig. 2.2 </span><span class="caption-text">Examples of Node Names</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<p>In <a class="reference internal" href="#example-nodenames"><span class="std std-numref">Fig. 2.2</span></a>:</p>
<ul class="simple">
<li>The nodes with the name <code class="docutils literal notranslate"><span class="pre">cpu</span></code> are distinguished by their unit-address
values of 0 and 1.</li>
<li>The nodes with the name <code class="docutils literal notranslate"><span class="pre">ethernet</span></code> are distinguished by their
unit-address values of <code class="docutils literal notranslate"><span class="pre">fe002000</span></code> and <code class="docutils literal notranslate"><span class="pre">fe003000</span></code>.</li>
</ul>
</div>
</div>
<div class="section" id="generic-names-recommendation">
<h4>2.2.2. Generic Names Recommendation<a class="headerlink" href="#generic-names-recommendation" title="Permalink to this headline">¶</a></h4>
<p>The name of a node should be somewhat generic, reflecting the function
of the device and not its precise programming model. If appropriate, the
name should be one of the following choices:</p>
<table class="hlist"><tr><td><ul class="simple">
<li>adc</li>
<li>accelerometer</li>
<li>atm</li>
<li>audio-codec</li>
<li>audio-controller</li>
<li>backlight</li>
<li>bluetooth</li>
<li>bus</li>
<li>cache-controller</li>
<li>camera</li>
<li>can</li>
<li>charger</li>
<li>clock</li>
<li>clock-controller</li>
<li>compact-flash</li>
<li>cpu</li>
<li>cpus</li>
<li>crypto</li>
<li>disk</li>
<li>display</li>
<li>dma-controller</li>
<li>dsi</li>
<li>dsp</li>
<li>eeprom</li>
<li>efuse</li>
<li>endpoint</li>
<li>ethernet</li>
<li>ethernet-phy</li>
<li>fdc</li>
<li>flash</li>
<li>gnss</li>
<li>gpio</li>
</ul>
</td><td><ul class="simple">
<li>gpu</li>
<li>gyrometer</li>
<li>hdmi</li>
<li>hwlock</li>
<li>i2c</li>
<li>i2c-mux</li>
<li>ide</li>
<li>interrupt-controller</li>
<li>iommu</li>
<li>isa</li>
<li>keyboard</li>
<li>key</li>
<li>keys</li>
<li>lcd-controller</li>
<li>led</li>
<li>leds</li>
<li>led-controller</li>
<li>light-sensor</li>
<li>magnetometer</li>
<li>mailbox</li>
<li>mdio</li>
<li>memory</li>
<li>memory-controller</li>
<li>mmc</li>
<li>mmc-slot</li>
<li>mouse</li>
<li>nand-controller</li>
<li>nvram</li>
<li>oscillator</li>
<li>parallel</li>
<li>pc-card</li>
<li>pci</li>
</ul>
</td><td><ul class="simple">
<li>pcie</li>
<li>phy</li>
<li>pinctrl</li>
<li>pmic</li>
<li>pmu</li>
<li>port</li>
<li>ports</li>
<li>power-monitor</li>
<li>pwm</li>
<li>regulator</li>
<li>reset-controller</li>
<li>rng</li>
<li>rtc</li>
<li>sata</li>
<li>scsi</li>
<li>serial</li>
<li>sound</li>
<li>spi</li>
<li>sram-controller</li>
<li>ssi-controller</li>
<li>syscon</li>
<li>temperature-sensor</li>
<li>timer</li>
<li>touchscreen</li>
<li>tpm</li>
<li>usb</li>
<li>usb-hub</li>
<li>usb-phy</li>
<li>video-codec</li>
<li>vme</li>
<li>watchdog</li>
<li>wifi</li>
</ul>
</td></tr></table>
</div>
<div class="section" id="path-names">
<h4>2.2.3. Path Names<a class="headerlink" href="#path-names" title="Permalink to this headline">¶</a></h4>
<p>A node in the devicetree can be uniquely identified by specifying the
full path from the root node, through all descendant nodes, to the
desired node.</p>
<p>The convention for specifying a device path is:</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">/node-name-1/node-name-2/node-name-N</span></code></div></blockquote>
<p>For example, in <a class="reference internal" href="#example-nodenames"><span class="std std-numref">Fig. 2.2</span></a>, the device path to cpu #1 would be:</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">/cpus/cpu&#64;1</span></code></div></blockquote>
<p>The path to the root node is /.</p>
<p>A unit address may be omitted if the full path to the node is
unambiguous.</p>
<p>If a client program encounters an ambiguous path, its behavior is
undefined.</p>
</div>
<div class="section" id="properties">
<h4>2.2.4. Properties<a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h4>
<p>Each node in the devicetree has properties that describe the
characteristics of the node. Properties consist of a name and a value.</p>
<div class="section" id="property-names">
<h5>2.2.4.1. Property Names<a class="headerlink" href="#property-names" title="Permalink to this headline">¶</a></h5>
<p>Property names are strings of 1 to 31 characters from the characters show in
<a class="reference internal" href="#property-name-characters"><span class="std std-numref">Table 2.2</span></a></p>
<span id="property-name-characters"></span><table border="1" class="docutils" id="id6">
<caption><span class="caption-number">Table 2.2 </span><span class="caption-text">Valid characters for property names</span><a class="headerlink" href="#id6" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Character</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">0-9</span></code></td>
<td>digit</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">a-z</span></code></td>
<td>lowercase letter</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">A-Z</span></code></td>
<td>uppercase letter</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">,</span></code></td>
<td>comma</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">.</span></code></td>
<td>period</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">_</span></code></td>
<td>underscore</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">+</span></code></td>
<td>plus sign</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">?</span></code></td>
<td>question mark</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">#</span></code></td>
<td>hash</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">-</span></code></td>
<td>dash</td>
</tr>
</tbody>
</table>
<p>Nonstandard property names should specify a unique string prefix, such
as a stock ticker symbol, identifying the name of the company or
organization that defined the property. Examples:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">fsl,channel-fifo-len</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">ibm,ppc-interrupt-server#s</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">linux,network-index</span></code></div>
</div>
</div></blockquote>
</div>
<div class="section" id="property-values">
<span id="sect-property-values"></span><h5>2.2.4.2. Property Values<a class="headerlink" href="#property-values" title="Permalink to this headline">¶</a></h5>
<p>A property value is an array of zero or more bytes that contain
information associated with the property.</p>
<p>Properties might have an empty value if conveying true-false
information. In this case, the presence or absence of the property is
sufficiently descriptive.</p>
<p><a class="reference internal" href="#property-values-table"><span class="std std-numref">Table 2.3</span></a> describes the set of basic value types defined by the DTSpec.</p>
<span id="property-values-table"></span><table border="1" class="longtable docutils" id="id7">
<caption><span class="caption-number">Table 2.3 </span><span class="caption-text">Property values</span><a class="headerlink" href="#id7" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code></td>
<td>Value is empty. Used for conveying true-false information, when
the presence or absence of the property itself is sufficiently
descriptive.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td><p class="first">A 32-bit integer in big-endian format. Example: the 32-bit value
0x11223344 would be represented in memory as:</p>
<blockquote class="last">
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>address    11
address+1  22
address+2  33
address+3  44
</pre></div>
</div>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;u64&gt;</span></code></td>
<td><p class="first">Represents a 64-bit integer in big-endian format. Consists of
two <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code> values where the first value contains the most
significant bits of the integer and the second value contains
the least significant bits.</p>
<p>Example: the 64-bit value 0x1122334455667788 would be
represented as two cells as: <code class="docutils literal notranslate"><span class="pre">&lt;0x11223344</span> <span class="pre">0x55667788&gt;</span></code>.</p>
<p>The value would be represented in memory as:</p>
<blockquote class="last">
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>  address  11
address+1  22
address+2  33
address+3  44
address+4  55
address+5  66
address+6  77
address+7  88
</pre></div>
</div>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></td>
<td><p class="first">Strings are printable and null-terminated. Example: the string
“hello” would be represented in memory as:</p>
<blockquote class="last">
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>  address  68  &#39;h&#39;
address+1  65  &#39;e&#39;
address+2  6C  &#39;l&#39;
address+3  6C  &#39;l&#39;
address+4  6F  &#39;o&#39;
address+5  00  &#39;\0&#39;
</pre></div>
</div>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code></td>
<td>Format is specific to the property. See the property definition.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;phandle&gt;</span></code></td>
<td>A <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code> value. A <em>phandle</em> value is a way to reference another
node in the devicetree. Any node that can be referenced defines
a phandle property with a unique <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code> value. That number
is used for the value of properties with a phandle value
type.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;stringlist&gt;</span></code></td>
<td><p class="first">A list of <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> values concatenated together.</p>
<p>Example: The string list “hello”,”world” would be represented in
memory as:</p>
<blockquote class="last">
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>   address  68  &#39;h&#39;
 address+1  65  &#39;e&#39;
 address+2  6C  &#39;l&#39;
 address+3  6C  &#39;l&#39;
 address+4  6F  &#39;o&#39;
 address+5  00  &#39;\0&#39;
 address+6  77  &#39;w&#39;
 address+7  6f  &#39;o&#39;
 address+8  72  &#39;r&#39;
 address+9  6C  &#39;l&#39;
address+10  64  &#39;d&#39;
address+11  00  &#39;\0&#39;
</pre></div>
</div>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="standard-properties">
<span id="sect-standard-properties"></span><h3>2.3. Standard Properties<a class="headerlink" href="#standard-properties" title="Permalink to this headline">¶</a></h3>
<p>DTSpec specifies a set of standard properties for device nodes. These
properties are described in detail in this section. Device nodes defined
by DTSpec (see Chapter <a class="reference internal" href="index.html#chapter-device-node-requirements"><span class="std std-ref">3</span></a>) may specify
additional requirements or constraints regarding the use of the standard
properties. Chapter <a class="reference internal" href="index.html#chapter-device-bindings"><span class="std std-ref">4</span></a> describes the representation
of specific devices and may also specify additional requirements.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All examples of devicetree nodes in this document use the
<abbr title="Devicetree Source">DTS</abbr> format for specifying nodes and properties.</p>
</div>
<div class="section" id="compatible">
<span id="sect-standard-properties-compatible"></span><h4>2.3.1. compatible<a class="headerlink" href="#compatible" title="Permalink to this headline">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">compatible</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;stringlist&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div><p>The <em>compatible</em> property value consists of one or more strings that
define the specific programming model for the device. This list of
strings should be used by a client program for device driver selection.
The property value consists of a concatenated list of null terminated
strings, from most specific to most general. They allow a device to
express its compatibility with a family of similar devices, potentially
allowing a single device driver to match against several devices.</p>
<p>The recommended format is <code class="docutils literal notranslate"><span class="pre">&quot;manufacturer,model&quot;</span></code>, where
<code class="docutils literal notranslate"><span class="pre">manufacturer</span></code> is a string describing the name of the manufacturer
(such as a stock ticker symbol), and <code class="docutils literal notranslate"><span class="pre">model</span></code> specifies the model
number.</p>
</div></blockquote>
<p>Example:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">compatible</span> <span class="pre">=</span> <span class="pre">&quot;fsl,mpc8641&quot;,</span> <span class="pre">&quot;ns16550&quot;;</span></code></p>
<p>In this example, an operating system would first try to locate a device
driver that supported fsl,mpc8641. If a driver was not found, it
would then try to locate a driver that supported the more general
ns16550 device type.</p>
</div></blockquote>
</div>
<div class="section" id="model">
<h4>2.3.2. model<a class="headerlink" href="#model" title="Permalink to this headline">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">model</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div><p>The model property value is a <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> that specifies the manufacturer’s
model number of the device.</p>
<p>The recommended format is: <code class="docutils literal notranslate"><span class="pre">&quot;manufacturer,model&quot;</span></code>, where
<code class="docutils literal notranslate"><span class="pre">manufacturer</span></code> is a string describing the name of the manufacturer
(such as a stock ticker symbol), and model specifies the model number.</p>
</div></blockquote>
<p>Example:</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">model</span> <span class="pre">=</span> <span class="pre">&quot;fsl,MPC8349EMITX&quot;;</span></code></div></blockquote>
</div>
<div class="section" id="phandle">
<span id="sect-standard-properties-phandle"></span><h4>2.3.3. phandle<a class="headerlink" href="#phandle" title="Permalink to this headline">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">phandle</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div>The <em>phandle</em> property specifies a numerical identifier for a node that
is unique within the devicetree. The <em>phandle</em> property value is used
by other nodes that need to refer to the node associated with the
property.</div></blockquote>
<p>Example:</p>
<blockquote>
<div><p>See the following devicetree excerpt:</p>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="nc">pic</span><span class="nf">@10000000</span> <span class="p">{</span>
   <span class="nf">phandle</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>
   <span class="nf">interrupt-controller</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>A <em>phandle</em> value of 1 is defined. Another device node could reference
the pic node with a phandle value of 1:</p>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="nc">another-device-node</span> <span class="p">{</span>
  <span class="nf">interrupt-parent</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>
<span class="p">};</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Older versions of devicetrees may be encountered that contain a
deprecated form of this property called <code class="docutils literal notranslate"><span class="pre">linux,phandle</span></code>. For
compatibility, a client program might want to support <code class="docutils literal notranslate"><span class="pre">linux,phandle</span></code>
if a <code class="docutils literal notranslate"><span class="pre">phandle</span></code> property is not present. The meaning and use of the two
properties is identical.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Most devicetrees in <abbr title="Device Tree Syntax">DTS</abbr> (see Appendix A) will not
contain explicit phandle properties. The DTC tool automatically inserts
the <code class="docutils literal notranslate"><span class="pre">phandle</span></code> properties when the DTS is compiled into the binary DTB
format.</p>
</div>
</div>
<div class="section" id="status">
<h4>2.3.4. status<a class="headerlink" href="#status" title="Permalink to this headline">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">status</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div>The <code class="docutils literal notranslate"><span class="pre">status</span></code> property indicates the operational status of a device.
Valid values are listed and defined in <a class="reference internal" href="#table-prop-status-values"><span class="std std-numref">Table 2.4</span></a>.</div></blockquote>
<span id="table-prop-status-values"></span><table border="1" class="docutils" id="id8">
<caption><span class="caption-number">Table 2.4 </span><span class="caption-text">Values for status property</span><a class="headerlink" href="#id8" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&quot;okay&quot;</span></code></td>
<td>Indicates the device is operational.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&quot;disabled&quot;</span></code></td>
<td><p class="first">Indicates that the device is not presently operational, but it
might become operational in the future (for example, something
is not plugged in, or switched off).</p>
<p class="last">Refer to the device binding for details on what disabled means
for a given device.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&quot;reserved&quot;</span></code></td>
<td>Indicates that the device is operational, but should not be
used. Typically this is used for devices that are controlled
by another software component, such as platform firmware.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&quot;fail&quot;</span></code></td>
<td>Indicates that the device is not operational. A serious error
was detected in the device, and it is unlikely to become
operational without repair.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&quot;fail-sss&quot;</span></code></td>
<td>Indicates that the device is not operational. A serious error
was detected in the device and it is unlikely to become
operational without repair. The <em>sss</em> portion of the value is
specific to the device and indicates the error condition
detected.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="address-cells-and-size-cells">
<h4>2.3.5. #address-cells and #size-cells<a class="headerlink" href="#address-cells-and-size-cells" title="Permalink to this headline">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">#address-cells</span></code>, <code class="docutils literal notranslate"><span class="pre">#size-cells</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div><p>The <em>#address-cells</em> and <em>#size-cells</em> properties may be used in any
device node that has children in the devicetree hierarchy and describes
how child device nodes should be addressed. The <em>#address-cells</em>
property defines the number of <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code> cells used to encode the address
field in a child node’s <em>reg</em> property. The <em>#size-cells</em> property
defines the number of <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code> cells used to encode the size field in a
child node’s <em>reg</em> property.</p>
<p>The <em>#address-cells</em> and <em>#size-cells</em> properties are not inherited from
ancestors in the devicetree. They shall be explicitly defined.</p>
<p>A DTSpec-compliant boot program shall supply <em>#address-cells</em> and
<em>#size-cells</em> on all nodes that have children.</p>
<p>If missing, a client program should assume a default value of 2 for
<em>#address-cells</em>, and a value of 1 for <em>#size-cells</em>.</p>
</div></blockquote>
<p>Example:</p>
<blockquote>
<div><p>See the following devicetree excerpt:</p>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="nc">soc</span> <span class="p">{</span>
   <span class="nf">#address-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>
   <span class="nf">#size-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>

   <span class="nc">serial</span><span class="nf">@4600</span> <span class="p">{</span>
      <span class="nf">compatible</span> <span class="o">=</span> <span class="s">&quot;ns16550&quot;</span><span class="p">;</span>
      <span class="nf">reg</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x4600</span> <span class="mh">0x100</span><span class="p">&gt;;</span>
      <span class="nf">clock-frequency</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">0</span><span class="p">&gt;;</span>
      <span class="nf">interrupts</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0xA</span> <span class="mh">0x8</span><span class="p">&gt;;</span>
      <span class="nf">interrupt-parent</span> <span class="o">=</span> <span class="p">&lt;</span><span class="o">&amp;</span>ipic<span class="p">&gt;;</span>
   <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
<p>In this example, the <em>#address-cells</em> and <em>#size-cells</em> properties of the <code class="docutils literal notranslate"><span class="pre">soc</span></code> node
are both set to 1. This setting specifies that one cell is required to
represent an address and one cell is required to represent the size of
nodes that are children of this node.</p>
<p>The serial device <em>reg</em> property necessarily follows this specification
set in the parent (<code class="docutils literal notranslate"><span class="pre">soc</span></code>) node—the address is represented by a single cell
(0x4600), and the size is represented by a single cell (0x100).</p>
</div></blockquote>
</div>
<div class="section" id="reg">
<h4>2.3.6. reg<a class="headerlink" href="#reg" title="Permalink to this headline">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">reg</span></code></p>
<p>Property value: <code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> encoded as an arbitrary number of (<em>address</em>, <em>length</em>) pairs.</p>
<p>Description:</p>
<blockquote>
<div><p>The <em>reg</em> property describes the address of the device’s resources
within the address space defined by its parent bus. Most commonly this
means the offsets and lengths of memory-mapped IO register blocks, but
may have a different meaning on some bus types. Addresses in the address
space defined by the root node are CPU real addresses.</p>
<p>The value is a <em>&lt;prop-encoded-array&gt;</em>, composed of an arbitrary number
of pairs of address and length, <em>&lt;address length&gt;</em>. The number of
<em>&lt;u32&gt;</em> cells required to specify the address and length are
bus-specific and are specified by the <em>#address-cells</em> and <em>#size-cells</em>
properties in the parent of the device node. If the parent node
specifies a value of 0 for <em>#size-cells</em>, the length field in the value
of <em>reg</em> shall be omitted.</p>
</div></blockquote>
<p>Example:</p>
<blockquote>
<div><p>Suppose a device within a system-on-a-chip had two blocks of registers, a
32-byte block at offset 0x3000 in the SOC and a 256-byte block at offset
0xFE00. The <em>reg</em> property would be encoded as follows (assuming
<em>#address-cells</em> and <em>#size-cells</em> values of 1):</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">reg</span> <span class="pre">=</span> <span class="pre">&lt;0x3000</span> <span class="pre">0x20</span> <span class="pre">0xFE00</span> <span class="pre">0x100&gt;;</span></code></div></blockquote>
</div></blockquote>
</div>
<div class="section" id="virtual-reg">
<span id="sect-standard-properties-virtual-reg"></span><h4>2.3.7. virtual-reg<a class="headerlink" href="#virtual-reg" title="Permalink to this headline">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">virtual-reg</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div>The <em>virtual-reg</em> property specifies an effective address that maps to
the first physical address specified in the <em>reg</em> property of the device
node. This property enables boot programs to provide client programs
with virtual-to-physical mappings that have been set up.</div></blockquote>
</div>
<div class="section" id="ranges">
<span id="sect-standard-properties-ranges"></span><h4>2.3.8. ranges<a class="headerlink" href="#ranges" title="Permalink to this headline">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">ranges</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> encoded as an arbitrary number of
(<em>child-bus-address</em>, <em>parent-bus-address</em>, <em>length</em>) triplets.</p>
<p>Description:</p>
<blockquote>
<div><p>The <em>ranges</em> property provides a means of defining a mapping or
translation between the address space of the bus (the child address
space) and the address space of the bus node’s parent (the parent
address space).</p>
<p>The format of the value of the <em>ranges</em> property is an arbitrary number
of triplets of (<em>child-bus-address</em>, <em>parent-bus-address</em>, <em>length</em>)</p>
<ul class="simple">
<li>The <em>child-bus-address</em> is a physical address within the child bus’
address space. The number of cells to represent the address is bus
dependent and can be determined from the <em>#address-cells</em> of this node
(the node in which the <em>ranges</em> property appears).</li>
<li>The <em>parent-bus-address</em> is a physical address within the parent bus’
address space. The number of cells to represent the parent address is
bus dependent and can be determined from the <em>#address-cells</em> property
of the node that defines the parent’s address space.</li>
<li>The <em>length</em> specifies the size of the range in the child’s address space. The number
of cells to represent the size can be determined from the <em>#size-cells</em>
of this node (the node in which the <em>ranges</em> property appears).</li>
</ul>
<p>If the property is defined with an <code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code> value, it specifies that the
parent and child address space is identical, and no address translation
is required.</p>
<p>If the property is not present in a bus node, it is assumed that no
mapping exists between children of the node and the parent address
space.</p>
</div></blockquote>
<p>Address Translation Example:</p>
<blockquote>
<div><div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="nc">soc</span> <span class="p">{</span>
   <span class="nf">compatible</span> <span class="o">=</span> <span class="s">&quot;simple-bus&quot;</span><span class="p">;</span>
   <span class="nf">#address-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>
   <span class="nf">#size-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>
   <span class="nf">ranges</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x0</span> <span class="mh">0xe0000000</span> <span class="mh">0x00100000</span><span class="p">&gt;;</span>

   <span class="nc">serial</span><span class="nf">@4600</span> <span class="p">{</span>
      <span class="nf">device_type</span> <span class="o">=</span> <span class="s">&quot;serial&quot;</span><span class="p">;</span>
      <span class="nf">compatible</span> <span class="o">=</span> <span class="s">&quot;ns16550&quot;</span><span class="p">;</span>
      <span class="nf">reg</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x4600</span> <span class="mh">0x100</span><span class="p">&gt;;</span>
      <span class="nf">clock-frequency</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">0</span><span class="p">&gt;;</span>
      <span class="nf">interrupts</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0xA</span> <span class="mh">0x8</span><span class="p">&gt;;</span>
      <span class="nf">interrupt-parent</span> <span class="o">=</span> <span class="p">&lt;</span><span class="o">&amp;</span>ipic<span class="p">&gt;;</span>
   <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">soc</span></code> node specifies a <em>ranges</em> property of</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">&lt;0x0</span> <span class="pre">0xe0000000</span> <span class="pre">0x00100000&gt;;</span></code></div></blockquote>
<p>This property value specifies that for a 1024 KB range of address space,
a child node addressed at physical 0x0 maps to a parent address of
physical 0xe0000000. With this mapping, the <code class="docutils literal notranslate"><span class="pre">serial</span></code> device node can
be addressed by a load or store at address 0xe0004600, an offset of
0x4600 (specified in <em>reg</em>) plus the 0xe0000000 mapping specified in
<em>ranges</em>.</p>
</div></blockquote>
</div>
<div class="section" id="dma-ranges">
<h4>2.3.9. dma-ranges<a class="headerlink" href="#dma-ranges" title="Permalink to this headline">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">dma-ranges</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> encoded as an arbitrary number of
(<em>child-bus-address</em>, <em>parent-bus-address</em>, <em>length</em>) triplets.</p>
<p>Description:</p>
<blockquote>
<div><p>The <em>dma-ranges</em> property is used to describe the direct memory access
(DMA) structure of a memory-mapped bus whose devicetree parent can be
accessed from DMA operations originating from the bus. It provides a
means of defining a mapping or translation between the physical address
space of the bus and the physical address space of the parent of the
bus.</p>
<p>The format of the value of the <em>dma-ranges</em> property is an arbitrary
number of triplets of (<em>child-bus-address</em>, <em>parent-bus-address</em>,
<em>length</em>). Each triplet specified describes a contiguous DMA address
range.</p>
<ul class="simple">
<li>The <em>child-bus-address</em> is a physical address within the child bus’
address space. The number of cells to represent the address depends
on the bus and can be determined from the <em>#address-cells</em> of this
node (the node in which the <em>dma-ranges</em> property appears).</li>
<li>The <em>parent-bus-address</em> is a physical address within the parent bus’
address space. The number of cells to represent the parent address is
bus dependent and can be determined from the <em>#address-cells</em>
property of the node that defines the parent’s address space.</li>
<li>The <em>length</em> specifies the size of the range in the child’s address
space. The number of cells to represent the size can be determined
from the <em>#size-cells</em> of this node (the node in which the dma-ranges
property appears).</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="name-deprecated">
<h4>2.3.10. name (deprecated)<a class="headerlink" href="#name-deprecated" title="Permalink to this headline">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">name</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div>The <em>name</em> property is a string specifying the name of the node. This
property is deprecated, and its use is not recommended. However, it
might be used in older non-DTSpec-compliant devicetrees. Operating
system should determine a node’s name based on the <em>node-name</em> component of
the node name (see section <a class="reference internal" href="#sect-node-names"><span class="std std-ref">2.2.1</span></a>).</div></blockquote>
</div>
<div class="section" id="device-type-deprecated">
<h4>2.3.11. device_type (deprecated)<a class="headerlink" href="#device-type-deprecated" title="Permalink to this headline">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">device_type</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div>The <em>device_type</em> property was used in IEEE 1275 to describe the
device’s FCode programming model. Because DTSpec does not have FCode, new
use of the property is deprecated, and it should be included only on <code class="docutils literal notranslate"><span class="pre">cpu</span></code>
and <code class="docutils literal notranslate"><span class="pre">memory</span></code> nodes for compatibility with IEEE 1275–derived devicetrees.</div></blockquote>
</div>
</div>
<div class="section" id="interrupts-and-interrupt-mapping">
<span id="sect-interrupts"></span><h3>2.4. Interrupts and Interrupt Mapping<a class="headerlink" href="#interrupts-and-interrupt-mapping" title="Permalink to this headline">¶</a></h3>
<p>DTSpec adopts the interrupt tree model of representing interrupts
specified in <em>Open Firmware Recommended Practice: Interrupt Mapping,
Version 0.9</em> <a class="reference internal" href="index.html#b7" id="id1">[b7]</a>. Within the devicetree a logical interrupt tree exists
that represents the hierarchy and routing of interrupts in the platform
hardware. While generically referred to as an interrupt tree it is more
technically a directed acyclic graph.</p>
<p>The physical wiring of an interrupt source to an interrupt controller is
represented in the devicetree with the <em>interrupt-parent</em> property.
Nodes that represent interrupt-generating devices contain an
<em>interrupt-parent</em> property which has a <em>phandle</em> value that points to
the device to which the device’s interrupts are routed, typically an
interrupt controller. If an interrupt-generating device does not have an
<em>interrupt-parent</em> property, its interrupt parent is assumed to be its
devicetree parent.</p>
<p>Each interrupt generating device contains an <em>interrupts</em> property with
a value describing one or more interrupt sources for that device. Each
source is represented with information called an <em>interrupt specifier</em>.
The format and meaning of an <em>interrupt specifier</em> is interrupt domain
specific, i.e., it is dependent on properties on the node at the root of
its interrupt domain. The <em>#interrupt-cells</em> property is used by the
root of an interrupt domain to define the number of <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code> values
needed to encode an interrupt specifier. For example, for an Open PIC
interrupt controller, an interrupt-specifer takes two 32-bit values and
consists of an interrupt number and level/sense information for the
interrupt.</p>
<p>An interrupt domain is the context in which an interrupt specifier is
interpreted. The root of the domain is either (1) an interrupt
controller or (2) an interrupt nexus.</p>
<ol class="arabic simple">
<li>An <em>interrupt controller</em> is physical device and will need a driver
to handle interrupts routed through it. It may also cascade into
another interrupt domain. An interrupt controller is specified by the
presence of an <em>interrupt-controller</em> property on that node in the
devicetree.</li>
<li>An <em>interrupt nexus</em> defines a translation between one interrupt
domain and another. The translation is based on both domain-specific
and bus-specific information. This translation between domains is
performed with the <em>interrupt-map</em> property. For example, a PCI
controller device node could be an interrupt nexus that defines a
translation from the PCI interrupt namespace (INTA, INTB, etc.) to an
interrupt controller with Interrupt Request (IRQ) numbers.</li>
</ol>
<p>The root of the interrupt tree is determined when traversal of the
interrupt tree reaches an interrupt controller node without an
<em>interrupts</em> property and thus no explicit interrupt parent.</p>
<p>See <a class="reference internal" href="#example-interrupt-tree"><span class="std std-numref">Fig. 2.3</span></a> for an example of a graphical
representation of a devicetree with interrupt parent relationships shown. It
shows both the natural structure of the devicetree as well as where each node
sits in the logical interrupt tree.</p>
<div class="figure" id="id9">
<span id="example-interrupt-tree"></span><div class="graphviz"><img src="_images/graphviz-784f99c19fbefcefff50e503c9d79597b26103ca.png" alt="digraph tree {
rankdir = LR
ranksep = &quot;1.5&quot;
size = &quot;6,8&quot;
edge [ dir=&quot;none&quot; ]
node [ shape=&quot;Mrecord&quot; width=&quot;2.5&quot; ]

subgraph cluster_devices {
   label = &quot;Devicetree&quot;
   graph [ style = dotted ]
   &quot;soc&quot; [ ]
   &quot;device1&quot; [ label = &quot;device1 | interrupt-parent=\&lt;&amp;open-pic\&gt;&quot; ]
   &quot;device2&quot; [ label = &quot;device2 | interrupt-parent=\&lt;&amp;gpioctrl\&gt;&quot; ]
   &quot;pci-host&quot; [ label = &quot;pci-host | interrupt-parent=\&lt;&amp;open-pic\&gt;&quot; ]
   &quot;slot0&quot; [ label = &quot;slot0 | interrupt-parent=\&lt;&amp;pci-host\&gt;&quot; ]
   &quot;slot1&quot; [ label = &quot;slot1 | interrupt-parent=\&lt;&amp;pci-host\&gt;&quot; ]
   &quot;simple-bus&quot; [ label = &quot;simple-bus&quot; ]
   &quot;gpioctrl&quot; [ label = &quot;gpioctrl | interrupt-parent=\&lt;&amp;open-pic\&gt;&quot; ]
   &quot;device3&quot; [ label = &quot;device3 | interrupt-parent=\&lt;&amp;gpioctrl\&gt;&quot; ]

   edge [dir=back color=blue]
   &quot;soc&quot;:e -&gt; &quot;device1&quot;:w
   &quot;soc&quot;:e -&gt; &quot;device2&quot;:w
   &quot;soc&quot;:e -&gt; &quot;open-pic&quot;:w
   &quot;soc&quot;:e -&gt; &quot;pci-host&quot;:w
   &quot;soc&quot;:e -&gt; &quot;simple-bus&quot;:w
   &quot;pci-host&quot;:e -&gt; &quot;slot0&quot;:w
   &quot;pci-host&quot;:e -&gt; &quot;slot1&quot;:w
   &quot;simple-bus&quot;:e -&gt; &quot;gpioctrl&quot;:w
   &quot;simple-bus&quot;:e -&gt; &quot;device3&quot;:w
}

subgraph cluster_interrupts {
   label = &quot;Interrupt tree&quot;
   graph [ style = dotted ]

   &quot;i-open-pic&quot; [ label = &quot;open-pic | Root of Interrupt tree&quot; ]
   &quot;i-pci-host&quot; [ label = &quot;pci-host | Nexus Node&quot; ]
   &quot;i-gpioctrl&quot; [ label = &quot;gpioctrl | Nexus Node&quot; ]
   &quot;i-device1&quot; [ label = &quot;device1&quot; ]
   &quot;i-device2&quot; [ label = &quot;device2&quot; ]
   &quot;i-device3&quot; [ label = &quot;device3&quot; ]
   &quot;i-slot0&quot; [ label = &quot;slot0&quot; ]
   &quot;i-slot1&quot; [ label = &quot;slot1&quot; ]

   edge [dir=back color=green]
   &quot;i-open-pic&quot;:e -&gt; &quot;i-device1&quot;:w
   &quot;i-open-pic&quot;:e -&gt; &quot;i-pci-host&quot;:w
   &quot;i-open-pic&quot;:e -&gt; &quot;i-gpioctrl&quot;:w
   &quot;i-pci-host&quot;:e -&gt; &quot;i-slot0&quot;:w
   &quot;i-pci-host&quot;:e -&gt; &quot;i-slot1&quot;:w
   &quot;i-gpioctrl&quot;:e -&gt; &quot;i-device2&quot;:w
   &quot;i-gpioctrl&quot;:e -&gt; &quot;i-device3&quot;:w
}

subgraph {
   edge [color=red, style=dotted, constraint=false]
   &quot;open-pic&quot; -&gt; &quot;i-open-pic&quot;
   &quot;gpioctrl&quot;:w -&gt; &quot;i-gpioctrl&quot;
   &quot;pci-host&quot; -&gt; &quot;i-pci-host&quot;
   &quot;slot0&quot;:e -&gt; &quot;i-slot0&quot;:e
   &quot;slot1&quot;:e -&gt; &quot;i-slot1&quot;:e
   &quot;device1&quot; -&gt; &quot;i-device1&quot;
   &quot;device2&quot;:e -&gt; &quot;i-device2&quot;:w
   &quot;device3&quot;:e -&gt; &quot;i-device3&quot;:e
}
}" class="graphviz" /></div>
<p class="caption"><span class="caption-number">Fig. 2.3 </span><span class="caption-text">Example of the interrupt tree</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
<p>In the example shown in <a class="reference internal" href="#example-interrupt-tree"><span class="std std-numref">Fig. 2.3</span></a>:</p>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">open-pic</span></code> interrupt controller is the root of the interrupt tree.</li>
<li>The interrupt tree root has three children—devices that route their
interrupts directly to the <code class="docutils literal notranslate"><span class="pre">open-pic</span></code><ul>
<li>device1</li>
<li>PCI host controller</li>
<li>GPIO Controller</li>
</ul>
</li>
<li>Three interrupt domains exist; one rooted at the <code class="docutils literal notranslate"><span class="pre">open-pic</span></code> node,
one at the <code class="docutils literal notranslate"><span class="pre">PCI</span> <span class="pre">host</span> <span class="pre">bridge</span></code> node, and one at the
<code class="docutils literal notranslate"><span class="pre">GPIO</span> <span class="pre">Controller</span></code> node.</li>
<li>There are two nexus nodes; one at the <code class="docutils literal notranslate"><span class="pre">PCI</span> <span class="pre">host</span> <span class="pre">bridge</span></code> and one at
the <code class="docutils literal notranslate"><span class="pre">GPIO</span> <span class="pre">controller</span></code>.</li>
</ul>
<div class="section" id="properties-for-interrupt-generating-devices">
<h4>2.4.1. Properties for Interrupt Generating Devices<a class="headerlink" href="#properties-for-interrupt-generating-devices" title="Permalink to this headline">¶</a></h4>
<div class="section" id="interrupts">
<h5>2.4.1.1. interrupts<a class="headerlink" href="#interrupts" title="Permalink to this headline">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">interrupts</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> encoded as arbitrary number of
interrupt specifiers</p>
<p>Description:</p>
<blockquote>
<div><p>The <em>interrupts</em> property of a device node defines the interrupt or
interrupts that are generated by the device. The value of the
<em>interrupts</em> property consists of an arbitrary number of interrupt
specifiers. The format of an interrupt specifier is defined by the
binding of the interrupt domain root.</p>
<p><em>interrupts</em> is overridden by the <em>interrupts-extended</em>
property and normally only one or the other should be used.</p>
</div></blockquote>
<p>Example:</p>
<blockquote>
<div><p>A common definition of an interrupt specifier in an open PIC–compatible
interrupt domain consists of two cells; an interrupt number and
level/sense information. See the following example, which defines a
single interrupt specifier, with an interrupt number of 0xA and
level/sense encoding of 8.</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">interrupts</span> <span class="pre">=</span> <span class="pre">&lt;0xA</span> <span class="pre">8&gt;;</span></code></div></blockquote>
</div></blockquote>
</div>
<div class="section" id="interrupt-parent">
<h5>2.4.1.2. interrupt-parent<a class="headerlink" href="#interrupt-parent" title="Permalink to this headline">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">interrupt-parent</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;phandle&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div>Because the hierarchy of the nodes in the interrupt tree might not match
the devicetree, the <em>interrupt-parent</em> property is available to make
the definition of an interrupt parent explicit. The value is the phandle
to the interrupt parent. If this property is missing from a device, its
interrupt parent is assumed to be its devicetree parent.</div></blockquote>
</div>
<div class="section" id="interrupts-extended">
<h5>2.4.1.3. interrupts-extended<a class="headerlink" href="#interrupts-extended" title="Permalink to this headline">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">interrupts-extended</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;phandle&gt;</span> <span class="pre">&lt;prop-encoded-array&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div>The <em>interrupts-extended</em> property lists the interrupt(s) generated by a
device.
<em>interrupts-extended</em> should be used instead of <em>interrupts</em> when a device
is connected to multiple interrupt controllers as it encodes a parent phandle
with each interrupt specifier.</div></blockquote>
<p>Example:</p>
<blockquote>
<div><p>This example shows how a device with two interrupt outputs connected to two
separate interrupt controllers would describe the connection using an
<em>interrupts-extended</em> property.
<code class="docutils literal notranslate"><span class="pre">pic</span></code> is an interrupt controller with an <em>#interrupt-cells</em> specifier
of 2, while <code class="docutils literal notranslate"><span class="pre">gic</span></code> is an interrupt controller with an <em>#interrupts-cells</em>
specifier of 1.</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">interrupts-extended</span> <span class="pre">=</span> <span class="pre">&lt;&amp;pic</span> <span class="pre">0xA</span> <span class="pre">8&gt;,</span> <span class="pre">&lt;&amp;gic</span> <span class="pre">0xda&gt;;</span></code></div></blockquote>
</div></blockquote>
<p>The <em>interrupts</em> and <em>interrupts-extended</em> properties are mutually exclusive.
A device node should use one or the other, but not both.
Using both is only permissible when required for compatibility with software
that does not understand <em>interrupts-extended</em>.
If both <em>interrupts-extended</em> and <em>interrupts</em> are present then
<em>interrupts-extended</em> takes precedence.</p>
</div>
</div>
<div class="section" id="properties-for-interrupt-controllers">
<h4>2.4.2. Properties for Interrupt Controllers<a class="headerlink" href="#properties-for-interrupt-controllers" title="Permalink to this headline">¶</a></h4>
<div class="section" id="interrupt-cells">
<h5>2.4.2.1. #interrupt-cells<a class="headerlink" href="#interrupt-cells" title="Permalink to this headline">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">#interrupt-cells</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div>The <em>#interrupt-cells</em> property defines the number of cells required to
encode an interrupt specifier for an interrupt domain.</div></blockquote>
</div>
<div class="section" id="interrupt-controller">
<h5>2.4.2.2. interrupt-controller<a class="headerlink" href="#interrupt-controller" title="Permalink to this headline">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">interrupt-controller</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div>The presence of an <em>interrupt-controller</em> property defines a node as an
interrupt controller node.</div></blockquote>
</div>
</div>
<div class="section" id="interrupt-nexus-properties">
<h4>2.4.3. Interrupt Nexus Properties<a class="headerlink" href="#interrupt-nexus-properties" title="Permalink to this headline">¶</a></h4>
<p>An interrupt nexus node shall have an <em>#interrupt-cells</em> property.</p>
<div class="section" id="interrupt-map">
<h5>2.4.3.1. interrupt-map<a class="headerlink" href="#interrupt-map" title="Permalink to this headline">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">interrupt-map</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> encoded as an arbitrary number of
interrupt mapping entries.</p>
<p>Description:</p>
<blockquote>
<div><p>An <em>interrupt-map</em> is a property on a nexus node that bridges one
interrupt domain with a set of parent interrupt domains and specifies
how interrupt specifiers in the child domain are mapped to their
respective parent domains.</p>
<p>The interrupt map is a table where each row is a mapping entry
consisting of five components: <em>child unit address</em>, <em>child interrupt
specifier</em>, <em>interrupt-parent</em>, <em>parent unit address</em>, <em>parent interrupt
specifier</em>.</p>
<dl class="docutils">
<dt>child unit address</dt>
<dd>The unit address of the child node being mapped. The number of
32-bit cells required to specify this is described by the
<em>#address-cells</em> property of the bus node on which the child is
located.</dd>
<dt>child interrupt specifier</dt>
<dd>The interrupt specifier of the child node being mapped. The number
of 32-bit cells required to specify this component is described by
the <em>#interrupt-cells</em> property of this node—the nexus node
containing the <em>interrupt-map</em> property.</dd>
<dt>interrupt-parent</dt>
<dd>A single <em>&lt;phandle&gt;</em> value that points to the interrupt parent to
which the child domain is being mapped.</dd>
<dt>parent unit address</dt>
<dd>The unit address in the domain of the interrupt parent. The number
of 32-bit cells required to specify this address is described by the
<em>#address-cells</em> property of the node pointed to by the
interrupt-parent field.</dd>
<dt>parent interrupt specifier</dt>
<dd>The interrupt specifier in the parent domain. The number of 32-bit
cells required to specify this component is described by the
<em>#interrupt-cells</em> property of the node pointed to by the
interrupt-parent field.</dd>
</dl>
<p>Lookups are performed on the interrupt mapping table by matching a
unit-address/interrupt specifier pair against the child components in
the interrupt-map. Because some fields in the unit interrupt specifier
may not be relevant, a mask is applied before the lookup is done. This
mask is defined in the <em>interrupt-map-mask</em> property (see section
<a class="reference internal" href="#sect-interrupt-map-mask"><span class="std std-ref">2.4.3.2</span></a>).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Both the child node and the interrupt parent node are required to
have <em>#address-cells</em> and <em>#interrupt-cells</em> properties defined. If a
unit address component is not required, <em>#address-cells</em> shall be
explicitly defined to be zero.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="interrupt-map-mask">
<span id="sect-interrupt-map-mask"></span><h5>2.4.3.2. interrupt-map-mask<a class="headerlink" href="#interrupt-map-mask" title="Permalink to this headline">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">interrupt-map-mask</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> encoded as a bit mask</p>
<p>Description:</p>
<blockquote>
<div>An <em>interrupt-map-mask</em> property is specified for a nexus node in the
interrupt tree. This property specifies a mask that is applied to the
incoming unit interrupt specifier being looked up in the table specified
in the <em>interrupt-map</em> property.</div></blockquote>
</div>
<div class="section" id="id2">
<h5>2.4.3.3. #interrupt-cells<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">#interrupt-cells</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div>The <em>#interrupt-cells</em> property defines the number of cells required to
encode an interrupt specifier for an interrupt domain.</div></blockquote>
</div>
</div>
<div class="section" id="interrupt-mapping-example">
<h4>2.4.4. Interrupt Mapping Example<a class="headerlink" href="#interrupt-mapping-example" title="Permalink to this headline">¶</a></h4>
<p>The following shows the representation of a fragment of a devicetree with
a PCI bus controller and a sample interrupt map for describing the
interrupt routing for two PCI slots (IDSEL 0x11,0x12). The INTA, INTB,
INTC, and INTD pins for slots 1 and 2 are wired to the Open PIC
interrupt controller.</p>
<div class="highlight-dts notranslate" id="example-interrupt-mapping"><div class="highlight"><pre><span></span><span class="nc">soc</span> <span class="p">{</span>
   <span class="nf">compatible</span> <span class="o">=</span> <span class="s">&quot;simple-bus&quot;</span><span class="p">;</span>
   <span class="nf">#address-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>
   <span class="nf">#size-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>

   <span class="nc">open-pic</span> <span class="p">{</span>
      <span class="nf">clock-frequency</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">0</span><span class="p">&gt;;</span>
      <span class="nf">interrupt-controller</span><span class="p">;</span>
      <span class="nf">#address-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">0</span><span class="p">&gt;;</span>
      <span class="nf">#interrupt-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">2</span><span class="p">&gt;;</span>
   <span class="p">};</span>

   <span class="nc">pci</span> <span class="p">{</span>
      <span class="nf">#interrupt-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>
      <span class="nf">#size-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">2</span><span class="p">&gt;;</span>
      <span class="nf">#address-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">3</span><span class="p">&gt;;</span>
      <span class="nf">interrupt-map-mask</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0xf800</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">7</span><span class="p">&gt;;</span>
      <span class="nf">interrupt-map</span> <span class="o">=</span> <span class="p">&lt;</span>
         <span class="cm">/* IDSEL 0x11 - PCI slot 1 */</span>
         <span class="mh">0x8800</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">&amp;</span>open-pic <span class="mi">2</span> <span class="mi">1</span> <span class="cm">/* INTA */</span>
         <span class="mh">0x8800</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">2</span> <span class="o">&amp;</span>open-pic <span class="mi">3</span> <span class="mi">1</span> <span class="cm">/* INTB */</span>
         <span class="mh">0x8800</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">3</span> <span class="o">&amp;</span>open-pic <span class="mi">4</span> <span class="mi">1</span> <span class="cm">/* INTC */</span>
         <span class="mh">0x8800</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">4</span> <span class="o">&amp;</span>open-pic <span class="mi">1</span> <span class="mi">1</span> <span class="cm">/* INTD */</span>
         <span class="cm">/* IDSEL 0x12 - PCI slot 2 */</span>
         <span class="mh">0x9000</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">&amp;</span>open-pic <span class="mi">3</span> <span class="mi">1</span> <span class="cm">/* INTA */</span>
         <span class="mh">0x9000</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">2</span> <span class="o">&amp;</span>open-pic <span class="mi">4</span> <span class="mi">1</span> <span class="cm">/* INTB */</span>
         <span class="mh">0x9000</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">3</span> <span class="o">&amp;</span>open-pic <span class="mi">1</span> <span class="mi">1</span> <span class="cm">/* INTC */</span>
         <span class="mh">0x9000</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">4</span> <span class="o">&amp;</span>open-pic <span class="mi">2</span> <span class="mi">1</span> <span class="cm">/* INTD */</span>
      <span class="p">&gt;;</span>
   <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
<p>One Open PIC interrupt controller is represented and is identified as an
interrupt controller with an <em>interrupt-controller</em> property.</p>
<p>Each row in the interrupt-map table consists of five parts: a child unit
address and interrupt specifier, which is mapped to an <em>interrupt-parent</em>
node with a specified parent unit address and interrupt specifier.</p>
<ul>
<li><p class="first">For example, the first row of the interrupt-map table specifies the
mapping for INTA of slot 1. The components of that row are shown here</p>
<div class="line-block">
<div class="line">child unit address: <code class="docutils literal notranslate"><span class="pre">0x8800</span> <span class="pre">0</span> <span class="pre">0</span></code></div>
<div class="line">child interrupt specifier: <code class="docutils literal notranslate"><span class="pre">1</span></code></div>
<div class="line">interrupt parent: <code class="docutils literal notranslate"><span class="pre">&amp;open-pic</span></code></div>
<div class="line">parent unit address: (empty because <code class="docutils literal notranslate"><span class="pre">#address-cells</span> <span class="pre">=</span> <span class="pre">&lt;0&gt;</span></code> in the
open-pic node)</div>
<div class="line">parent interrupt specifier: <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">1</span></code></div>
</div>
<ul class="simple">
<li>The child unit address is <code class="docutils literal notranslate"><span class="pre">&lt;0x8800</span> <span class="pre">0</span> <span class="pre">0&gt;</span></code>. This value is encoded
with three 32-bit cells, which is determined by the value of the
<em>#address-cells</em> property (value of 3) of the PCI controller. The
three cells represent the PCI address as described by the binding for
the PCI bus.<ul>
<li>The encoding includes the bus number (0x0 &lt;&lt; 16), device number
(0x11 &lt;&lt; 11), and function number (0x0 &lt;&lt; 8).</li>
</ul>
</li>
<li>The child interrupt specifier is <code class="docutils literal notranslate"><span class="pre">&lt;1&gt;</span></code>, which specifies INTA as
described by the PCI binding. This takes one 32-bit cell as specified
by the <em>#interrupt-cells</em> property (value of 1) of the PCI
controller, which is the child interrupt domain.</li>
<li>The interrupt parent is specified by a phandle which points to the
interrupt parent of the slot, the Open PIC interrupt controller.</li>
<li>The parent has no unit address because the parent interrupt domain
(the open-pic node) has an <em>#address-cells</em> value of <code class="docutils literal notranslate"><span class="pre">&lt;0&gt;</span></code>.</li>
<li>The parent interrupt specifier is <code class="docutils literal notranslate"><span class="pre">&lt;2</span> <span class="pre">1&gt;</span></code>. The number of cells to
represent the interrupt specifier (two cells) is determined by the
<em>#interrupt-cells</em> property on the interrupt parent, the open-pic
node.<ul>
<li>The value <code class="docutils literal notranslate"><span class="pre">&lt;2</span> <span class="pre">1&gt;</span></code> is a value specified by the device binding for
the Open PIC interrupt controller (see section
<a class="reference internal" href="index.html#sect-bindings-simple-bus"><span class="std std-ref">4.5</span></a>). The value <code class="docutils literal notranslate"><span class="pre">&lt;2&gt;</span></code> specifies the
physical interrupt source number on the interrupt controller to
which INTA is wired. The value <code class="docutils literal notranslate"><span class="pre">&lt;1&gt;</span></code> specifies the level/sense
encoding.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>In this example, the interrupt-map-mask property has a value of <code class="docutils literal notranslate"><span class="pre">&lt;0xf800</span>
<span class="pre">0</span> <span class="pre">0</span> <span class="pre">7&gt;</span></code>. This mask is applied to a child unit interrupt specifier before
performing a lookup in the <em>interrupt-map</em> table.</p>
<p>To perform a lookup of the open-pic interrupt source number for INTB for
IDSEL 0x12 (slot 2), function 0x3, the following steps would be
performed:</p>
<ul class="simple">
<li>The child unit address and interrupt specifier form the value
<code class="docutils literal notranslate"><span class="pre">&lt;0x9300</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">2&gt;</span></code>.<ul>
<li>The encoding of the address includes the bus number (0x0 &lt;&lt; 16),
device number (0x12 &lt;&lt; 11), and function number (0x3 &lt;&lt; 8).</li>
<li>The interrupt specifier is 2, which is the encoding for INTB as
per the PCI binding.</li>
</ul>
</li>
<li>The interrupt-map-mask value <code class="docutils literal notranslate"><span class="pre">&lt;0xf800</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">7&gt;</span></code> is applied, giving a
result of <code class="docutils literal notranslate"><span class="pre">&lt;0x9000</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">2&gt;</span></code>.</li>
<li>That result is looked up in the <em>interrupt-map</em> table, which maps to
the parent interrupt specifier <code class="docutils literal notranslate"><span class="pre">&lt;4</span> <span class="pre">1&gt;</span></code>.</li>
</ul>
</div>
</div>
<div class="section" id="nexus-nodes-and-specifier-mapping">
<span id="sect-nexus"></span><h3>2.5. Nexus Nodes and Specifier Mapping<a class="headerlink" href="#nexus-nodes-and-specifier-mapping" title="Permalink to this headline">¶</a></h3>
<div class="section" id="nexus-node-properties">
<h4>2.5.1. Nexus Node Properties<a class="headerlink" href="#nexus-node-properties" title="Permalink to this headline">¶</a></h4>
<p>A nexus node shall have a <em>#&lt;specifier&gt;-cells</em> property, where &lt;specifier&gt; is
some specifier space such as ‘gpio’, ‘clock’, ‘reset’, etc.</p>
<div class="section" id="specifier-map">
<h5>2.5.1.1. &lt;specifier&gt;-map<a class="headerlink" href="#specifier-map" title="Permalink to this headline">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">&lt;specifier&gt;-map</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> encoded as an arbitrary number of
specifier mapping entries.</p>
<p>Description:</p>
<blockquote>
<div><p>A <em>&lt;specifier&gt;-map</em> is a property in a nexus node that bridges one
specifier domain with a set of parent specifier domains and describes
how specifiers in the child domain are mapped to their respective parent
domains.</p>
<p>The map is a table where each row is a mapping entry
consisting of three components: <em>child specifier</em>, <em>specifier parent</em>, and
<em>parent specifier</em>.</p>
<dl class="docutils">
<dt>child specifier</dt>
<dd>The specifier of the child node being mapped. The number
of 32-bit cells required to specify this component is described by
the <em>#&lt;specifier&gt;-cells</em> property of this node—the nexus node
containing the <em>&lt;specifier&gt;-map</em> property.</dd>
<dt>specifier parent</dt>
<dd>A single <em>&lt;phandle&gt;</em> value that points to the specifier parent to
which the child domain is being mapped.</dd>
<dt>parent specifier</dt>
<dd>The specifier in the parent domain. The number of 32-bit
cells required to specify this component is described by the
<em>#&lt;specifier&gt;-cells</em> property of the specifier parent node.</dd>
</dl>
<p>Lookups are performed on the mapping table by matching a specifier against
the child specifier in the map. Because some fields in the specifier may
not be relevant or need to be modified, a mask is applied before the lookup
is done. This mask is defined in the <em>&lt;specifier&gt;-map-mask</em> property (see
section <a class="reference internal" href="#sect-specifier-map-mask"><span class="std std-ref">2.5.1.2</span></a>).</p>
<p>Similarly, when the specifier is mapped, some fields in the unit specifier
may need to be kept unmodified and passed through from the child node to the
parent node. In this case, a <em>&lt;specifier&gt;-map-pass-thru</em> property (see
section <a class="reference internal" href="#sect-specifier-map-pass-thru"><span class="std std-ref">2.5.1.3</span></a>) may be specified to apply
a mask to the child specifier and copy any bits that match to the parent
unit specifier.</p>
</div></blockquote>
</div>
<div class="section" id="specifier-map-mask">
<span id="sect-specifier-map-mask"></span><h5>2.5.1.2. &lt;specifier&gt;-map-mask<a class="headerlink" href="#specifier-map-mask" title="Permalink to this headline">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">&lt;specifier&gt;-map-mask</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> encoded as a bit mask</p>
<p>Description:</p>
<blockquote>
<div>A <em>&lt;specifier&gt;-map-mask</em> property may be specified for a nexus node.
This property specifies a mask that is applied to the child unit
specifier being looked up in the table specified in the <em>&lt;specifier&gt;-map</em>
property. If this property is not specified, the mask is assumed to be
a mask with all bits set.</div></blockquote>
</div>
<div class="section" id="specifier-map-pass-thru">
<span id="sect-specifier-map-pass-thru"></span><h5>2.5.1.3. &lt;specifier&gt;-map-pass-thru<a class="headerlink" href="#specifier-map-pass-thru" title="Permalink to this headline">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">&lt;specifier&gt;-map-pass-thru</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> encoded as a bit mask</p>
<p>Description:</p>
<blockquote>
<div>A <em>&lt;specifier&gt;-map-pass-thru</em> property may be specified for a nexus node.
This property specifies a mask that is applied to the child unit
specifier being looked up in the table specified in the <em>&lt;specifier&gt;-map</em>
property. Any matching bits in the child unit specifier are copied over
to the parent specifier. If this property is not specified, the mask is
assumed to be a mask with no bits set.</div></blockquote>
</div>
<div class="section" id="specifier-cells">
<h5>2.5.1.4. #&lt;specifier&gt;-cells<a class="headerlink" href="#specifier-cells" title="Permalink to this headline">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">#&lt;specifier&gt;-cells</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div>The <em>#&lt;specifier&gt;-cells</em> property defines the number of cells required to
encode a specifier for a domain.</div></blockquote>
</div>
</div>
<div class="section" id="specifier-mapping-example">
<h4>2.5.2. Specifier Mapping Example<a class="headerlink" href="#specifier-mapping-example" title="Permalink to this headline">¶</a></h4>
<p>The following shows the representation of a fragment of a devicetree with
two GPIO controllers and a sample specifier map for describing the
GPIO routing of a few gpios on both of the controllers through a connector
on a board to a device. The expansion device node is one one side of the
connector node and the SoC with the two GPIO controllers is on the other
side of the connector.</p>
<div class="highlight-dts notranslate" id="example-specifier-mapping"><div class="highlight"><pre><span></span><span class="nc">soc</span> <span class="p">{</span>
        <span class="nl">soc_gpio1:</span> <span class="nc">gpio-controller1</span> <span class="p">{</span>
                <span class="nf">#gpio-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">2</span><span class="p">&gt;;</span>
        <span class="p">};</span>

        <span class="nl">soc_gpio2:</span> <span class="nc">gpio-controller2</span> <span class="p">{</span>
                <span class="nf">#gpio-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">2</span><span class="p">&gt;;</span>
        <span class="p">};</span>
<span class="p">};</span>

<span class="nl">connector:</span> <span class="nc">connector</span> <span class="p">{</span>
        <span class="nf">#gpio-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">2</span><span class="p">&gt;;</span>
        <span class="nf">gpio-map</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">0</span> <span class="mi">0</span> <span class="o">&amp;</span>soc_gpio1 <span class="mi">1</span> <span class="mi">0</span><span class="p">&gt;,</span>
                   <span class="p">&lt;</span><span class="mi">1</span> <span class="mi">0</span> <span class="o">&amp;</span>soc_gpio2 <span class="mi">4</span> <span class="mi">0</span><span class="p">&gt;,</span>
                   <span class="p">&lt;</span><span class="mi">2</span> <span class="mi">0</span> <span class="o">&amp;</span>soc_gpio1 <span class="mi">3</span> <span class="mi">0</span><span class="p">&gt;,</span>
                   <span class="p">&lt;</span><span class="mi">3</span> <span class="mi">0</span> <span class="o">&amp;</span>soc_gpio2 <span class="mi">2</span> <span class="mi">0</span><span class="p">&gt;;</span>
        <span class="nf">gpio-map-mask</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0xf</span> <span class="mh">0x0</span><span class="p">&gt;;</span>
        <span class="nf">gpio-map-pass-thru</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x0</span> <span class="mh">0x1</span><span class="p">&gt;;</span>
<span class="p">};</span>

<span class="nc">expansion_device</span> <span class="p">{</span>
        <span class="nf">reset-gpios</span> <span class="o">=</span> <span class="p">&lt;</span><span class="o">&amp;</span>connector <span class="mi">2</span> <span class="err">GPIO_ACTIVE_LOW</span><span class="p">&gt;;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Each row in the gpio-map table consists of three parts: a child unit
specifier, which is mapped to a <em>gpio-controller</em>
node with a parent specifier.</p>
<ul>
<li><p class="first">For example, the first row of the specifier-map table specifies the
mapping for GPIO 0 of the connector. The components of that row are shown
here</p>
<div class="line-block">
<div class="line">child specifier: <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">0</span></code></div>
<div class="line">specifier parent: <code class="docutils literal notranslate"><span class="pre">&amp;soc_gpio1</span></code></div>
<div class="line">parent specifier: <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">0</span></code></div>
</div>
<ul class="simple">
<li>The child specifier is <code class="docutils literal notranslate"><span class="pre">&lt;0</span> <span class="pre">0&gt;</span></code>, which specifies GPIO 0 in the connector
with a <em>flags</em> field of <code class="docutils literal notranslate"><span class="pre">0</span></code>. This takes two 32-bit cells as specified
by the <em>#gpio-cells</em> property of the connector node, which is the
child specifier domain.</li>
<li>The specifier parent is specified by a phandle which points to the
specifier parent of the connector, the first GPIO controller in the SoC.</li>
<li>The parent specifier is <code class="docutils literal notranslate"><span class="pre">&lt;1</span> <span class="pre">0&gt;</span></code>. The number of cells to
represent the gpio specifier (two cells) is determined by the
<em>#gpio-cells</em> property on the specifier parent, the soc_gpio1
node.<ul>
<li>The value <code class="docutils literal notranslate"><span class="pre">&lt;1</span> <span class="pre">0&gt;</span></code> is a value specified by the device binding for
the GPIO controller. The value <code class="docutils literal notranslate"><span class="pre">&lt;1&gt;</span></code> specifies the
GPIO pin number on the GPIO controller to which GPIO 0 on the connector
is wired. The value <code class="docutils literal notranslate"><span class="pre">&lt;0&gt;</span></code> specifies the flags (active low,
active high, etc.).</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>In this example, the <em>gpio-map-mask</em> property has a value of <code class="docutils literal notranslate"><span class="pre">&lt;0xf</span> <span class="pre">0&gt;</span></code>.
This mask is applied to a child unit specifier before performing a lookup in
the <em>gpio-map</em> table. Similarly, the <em>gpio-map-pass-thru</em> property has a value
of <code class="docutils literal notranslate"><span class="pre">&lt;0x0</span> <span class="pre">0x1&gt;</span></code>. This mask is applied to a child unit specifier when mapping
it to the parent unit specifier. Any bits set in this mask are cleared out of
the parent unit specifier and copied over from the child unit specifier
to the parent unit specifier.</p>
<p>To perform a lookup of the connector’s specifier source number for GPIO 2
from the expansion device’s reset-gpios property, the following steps would be
performed:</p>
<ul class="simple">
<li>The child specifier forms the value <code class="docutils literal notranslate"><span class="pre">&lt;2</span> <span class="pre">GPIO_ACTIVE_LOW&gt;</span></code>.<ul>
<li>The specifier is encoding GPIO 2 with active low flags per the GPIO
binding.</li>
</ul>
</li>
<li>The <em>gpio-map-mask</em> value <code class="docutils literal notranslate"><span class="pre">&lt;0xf</span> <span class="pre">0x0&gt;</span></code> is ANDed with the child specifier,
giving a result of <code class="docutils literal notranslate"><span class="pre">&lt;0x2</span> <span class="pre">0&gt;</span></code>.</li>
<li>The result is looked up in the <em>gpio-map</em> table, which maps to
the parent specifier <code class="docutils literal notranslate"><span class="pre">&lt;3</span> <span class="pre">0&gt;</span></code> and &amp;soc_gpio1 <em>phandle</em>.</li>
<li>The <em>gpio-map-pass-thru</em> value <code class="docutils literal notranslate"><span class="pre">&lt;0x0</span> <span class="pre">0x1&gt;</span></code> is inverted and ANDed with the
parent specifier found in the <em>gpio-map</em> table, resulting in <code class="docutils literal notranslate"><span class="pre">&lt;3</span> <span class="pre">0&gt;</span></code>.
The child specifier is ANDed with the <em>gpio-map-pass-thru</em> mask, forming
<code class="docutils literal notranslate"><span class="pre">&lt;0</span> <span class="pre">GPIO_ACTIVE_LOW&gt;</span></code> which is then ORed with the cleared parent specifier
<code class="docutils literal notranslate"><span class="pre">&lt;3</span> <span class="pre">0&gt;</span></code> resulting in <code class="docutils literal notranslate"><span class="pre">&lt;3</span> <span class="pre">GPIO_ACTIVE_LOW&gt;</span></code>.</li>
<li>The specifier <code class="docutils literal notranslate"><span class="pre">&lt;3</span> <span class="pre">GPIO_ACTIVE_LOW&gt;</span></code> is appended to the mapped <em>phandle</em>
&amp;soc_gpio1 resulting in <code class="docutils literal notranslate"><span class="pre">&lt;&amp;soc_gpio1</span> <span class="pre">3</span> <span class="pre">GPIO_ACTIVE_LOW&gt;</span></code>.</li>
</ul>
</div>
</div>
</div>
<span id="document-devicenodes"></span><div class="section" id="device-node-requirements">
<span id="chapter-device-node-requirements"></span><h2>3. Device Node Requirements<a class="headerlink" href="#device-node-requirements" title="Permalink to this headline">¶</a></h2>
<div class="section" id="base-device-node-types">
<h3>3.1. Base Device Node Types<a class="headerlink" href="#base-device-node-types" title="Permalink to this headline">¶</a></h3>
<p>The sections that follow specify the requirements for the base set of
device nodes required in a DTSpec-compliant devicetree.</p>
<p>All devicetrees shall have a root node and the following nodes shall be
present at the root of all devicetrees:</p>
<ul class="simple">
<li>One <code class="docutils literal notranslate"><span class="pre">/cpus</span></code> node</li>
<li>At least one <code class="docutils literal notranslate"><span class="pre">/memory</span></code> node</li>
</ul>
</div>
<div class="section" id="root-node">
<h3>3.2. Root node<a class="headerlink" href="#root-node" title="Permalink to this headline">¶</a></h3>
<p>The devicetree has a single root node of which all other device nodes
are descendants. The full path to the root node is <code class="docutils literal notranslate"><span class="pre">/</span></code>.</p>
<table border="1" class="docutils" id="id2">
<caption><span class="caption-number">Table 3.1 </span><span class="caption-text">Root Node Properties</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="21%" />
<col width="6%" />
<col width="19%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property Name</th>
<th class="head">Usage</th>
<th class="head">Value Type</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">#address-cells</span></code></td>
<td>R</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies the number of <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code> cells to
represent the address in the <code class="docutils literal notranslate"><span class="pre">reg</span></code> property in
children of root.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">#size-cells</span></code></td>
<td>R</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies the number of <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code> cells to
represent the size in the <code class="docutils literal notranslate"><span class="pre">reg</span></code> property in
children of root.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">model</span></code></td>
<td>R</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></td>
<td>Specifies a string that uniquely identifies
the model of the system board. The recommended
format is “manufacturer,model-number”.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">compatible</span></code></td>
<td>R</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;stringlist&gt;</span></code></td>
<td><p class="first">Specifies a list of platform architectures
with which this platform is compatible. This
property can be used by operating systems in
selecting platform specific code. The
recommended form of the property value is:</p>
<p><code class="docutils literal notranslate"><span class="pre">&quot;manufacturer,model&quot;</span></code></p>
<p>For example:</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">compatible</span> <span class="pre">=</span> <span class="pre">&quot;fsl,mpc8572ds&quot;</span></code></p>
</td>
</tr>
<tr class="row-even"><td colspan="4">Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All other standard properties (section
<a class="reference internal" href="index.html#sect-standard-properties"><span class="std std-ref">2.3</span></a>) are allowed but are optional.</p>
</div>
</div>
<div class="section" id="aliases-node">
<h3>3.3. <code class="docutils literal notranslate"><span class="pre">/aliases</span></code> node<a class="headerlink" href="#aliases-node" title="Permalink to this headline">¶</a></h3>
<p>A devicetree may have an aliases node (<code class="docutils literal notranslate"><span class="pre">/aliases</span></code>) that defines one or
more alias properties. The alias node shall be at the root of the devicetree
and have the node name <code class="docutils literal notranslate"><span class="pre">/aliases</span></code>.</p>
<p>Each property of the <code class="docutils literal notranslate"><span class="pre">/aliases</span></code> node defines an alias. The property name
specifies the alias name. The property value specifies the full path to
a node in the devicetree. For example, the property serial0 =
<code class="docutils literal notranslate"><span class="pre">&quot;/simple-bus&#64;fe000000/serial&#64;llc500&quot;</span></code> defines the alias <code class="docutils literal notranslate"><span class="pre">serial0</span></code>.</p>
<p>Alias names shall be a lowercase text strings of 1 to 31 characters from
the following set of characters.</p>
<table border="1" class="docutils" id="id3">
<caption><span class="caption-number">Table 3.2 </span><span class="caption-text">Valid characters for alias names</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Character</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0-9</td>
<td>digit</td>
</tr>
<tr class="row-odd"><td>a-z</td>
<td>lowercase letter</td>
</tr>
<tr class="row-even"><td>-</td>
<td>dash</td>
</tr>
</tbody>
</table>
<p>An alias value is a device path and is encoded as a string. The value
represents the full path to a node, but the path does not need to refer
to a leaf node.</p>
<p>A client program may use an alias property name to refer to a full
device path as all or part of its string value. A client program, when
considering a string as a device path, shall detect and use the alias.</p>
<p><strong>Example</strong></p>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="nc">aliases</span> <span class="p">{</span>
    <span class="nf">serial0</span> <span class="o">=</span> <span class="s">&quot;/simple-bus@fe000000/serial@llc500&quot;</span><span class="p">;</span>
    <span class="nf">ethernet0</span> <span class="o">=</span> <span class="s">&quot;/simple-bus@fe000000/ethernet@31c000&quot;</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Given the alias <code class="docutils literal notranslate"><span class="pre">serial0</span></code>, a client program can look at the <code class="docutils literal notranslate"><span class="pre">/aliases</span></code> node
and determine the alias refers to the device path
<code class="docutils literal notranslate"><span class="pre">/simple-bus&#64;fe000000/serial&#64;llc500</span></code>.</p>
</div>
<div class="section" id="memory-node">
<h3>3.4. <code class="docutils literal notranslate"><span class="pre">/memory</span></code> node<a class="headerlink" href="#memory-node" title="Permalink to this headline">¶</a></h3>
<p>A memory device node is required for all devicetrees and describes the
physical memory layout for the system. If a system has multiple ranges
of memory, multiple memory nodes can be created, or the ranges can be
specified in the <em>reg</em> property of a single memory node.</p>
<p>The <em>unit-name</em> component of the node name (see section <a class="reference internal" href="index.html#sect-node-names"><span class="std std-ref">2.2.1</span></a>)
shall be <code class="docutils literal notranslate"><span class="pre">memory</span></code>.</p>
<p>The client program may access memory not covered by any memory
reservations (see section <a class="reference internal" href="index.html#sect-fdt-memory-reservation-block"><span class="std std-ref">5.3</span></a>)
using any storage attributes it chooses. However, before changing the
storage attributes used to access a real page, the client program is
responsible for performing actions required by the architecture and
implementation, possibly including flushing the real page from the
caches. The boot program is responsible for ensuring that, without
taking any action associated with a change in storage attributes, the
client program can safely access all memory (including memory covered by
memory reservations) as WIMG = 0b001x. That is:</p>
<ul class="simple">
<li>not Write Through Required</li>
<li>not Caching Inhibited</li>
<li>Memory Coherence</li>
<li>Required either not Guarded or Guarded</li>
</ul>
<p>If the VLE storage attribute is supported, with VLE=0.</p>
<table border="1" class="docutils" id="id4">
<caption><span class="caption-number">Table 3.3 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">/memory</span></code> Node Properties</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="23%" />
<col width="5%" />
<col width="25%" />
<col width="48%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property Name</th>
<th class="head">Usage</th>
<th class="head">Value Type</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">device_type</span></code></td>
<td>R</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></td>
<td>Value shall be “memory”</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">reg</span></code></td>
<td>R</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code></td>
<td>Consists of an arbitrary number of address and
size pairs that specify the physical address
and size of the memory ranges.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">initial-mapped-area</span></code></td>
<td>O</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code></td>
<td><p class="first">Specifies the address and size of the Initial
Mapped Area</p>
<p class="last">Is a prop-encoded-array consisting of a
triplet of (effective address, physical
address, size). The effective and physical
address shall each be 64-bit (<code class="docutils literal notranslate"><span class="pre">&lt;u64&gt;</span></code> value),
and the size shall be 32-bits (<code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code> value).</p>
</td>
</tr>
<tr class="row-odd"><td colspan="4">Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All other standard properties (section
<a class="reference internal" href="index.html#sect-standard-properties"><span class="std std-ref">2.3</span></a>) are allowed but are optional.</p>
</div>
<p><strong>Examples</strong></p>
<p>Given a 64-bit Power system with the following physical memory layout:</p>
<ul class="simple">
<li>RAM: starting address 0x0, length 0x80000000 (2 GB)</li>
<li>RAM: starting address 0x100000000, length 0x100000000 (4 GB)</li>
</ul>
<p>Memory nodes could be defined as follows, assuming <code class="docutils literal notranslate"><span class="pre">#address-cells</span> <span class="pre">=</span> <span class="pre">&lt;2&gt;</span></code>
and <code class="docutils literal notranslate"><span class="pre">#size-cells</span> <span class="pre">=</span> <span class="pre">&lt;2&gt;</span></code>.</p>
<p><strong>Example #1</strong></p>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="nc">memory</span><span class="nf">@0</span> <span class="p">{</span>
    <span class="nf">device_type</span> <span class="o">=</span> <span class="s">&quot;memory&quot;</span><span class="p">;</span>
    <span class="nf">reg</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x000000000</span> <span class="mh">0x00000000</span> <span class="mh">0x00000000</span> <span class="mh">0x80000000</span>
           <span class="mh">0x000000001</span> <span class="mh">0x00000000</span> <span class="mh">0x00000001</span> <span class="mh">0x00000000</span><span class="p">&gt;;</span>
<span class="p">};</span>
</pre></div>
</div>
<p><strong>Example #2</strong></p>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="nc">memory</span><span class="nf">@0</span> <span class="p">{</span>
    <span class="nf">device_type</span> <span class="o">=</span> <span class="s">&quot;memory&quot;</span><span class="p">;</span>
    <span class="nf">reg</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x000000000</span> <span class="mh">0x00000000</span> <span class="mh">0x00000000</span> <span class="mh">0x80000000</span><span class="p">&gt;;</span>
<span class="p">};</span>
<span class="nc">memory</span><span class="nf">@100000000</span> <span class="p">{</span>
    <span class="nf">device_type</span> <span class="o">=</span> <span class="s">&quot;memory&quot;</span><span class="p">;</span>
    <span class="nf">reg</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x000000001</span> <span class="mh">0x00000000</span> <span class="mh">0x00000001</span> <span class="mh">0x00000000</span><span class="p">&gt;;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">reg</span></code> property is used to define the address and size of the two
memory ranges. The 2 GB I/O region is skipped. Note that the
<code class="docutils literal notranslate"><span class="pre">#address-cells</span></code> and <code class="docutils literal notranslate"><span class="pre">#size-cells</span></code> properties of the root node specify a
value of 2, which means that two 32-bit cells are required to define the
address and length for the <code class="docutils literal notranslate"><span class="pre">reg</span></code> property of the memory node.</p>
</div>
<div class="section" id="chosen-node">
<h3>3.5. <code class="docutils literal notranslate"><span class="pre">/chosen</span></code> Node<a class="headerlink" href="#chosen-node" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">/chosen</span></code> node does not represent a real device in the system but
describes parameters chosen or specified by the system firmware at run
time. It shall be a child of the root node.</p>
<table border="1" class="docutils" id="id5">
<caption><span class="caption-number">Table 3.4 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">/chosen</span></code> Node Properties</span><a class="headerlink" href="#id5" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="24%" />
<col width="5%" />
<col width="22%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property Name</th>
<th class="head">Usage</th>
<th class="head">Value Type</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">bootargs</span></code></td>
<td>O</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></td>
<td>A string that specifies the boot arguments for
the client program. The value could
potentially be a null string if no boot
arguments are required.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">stdout-path</span></code></td>
<td>O</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></td>
<td>A string that specifies the full path to the
node representing the device to be used for
boot console output. If the character “:” is
present in the value it terminates the path.
The value may be an alias.
If the stdin-path property is not specified,
stdout-path should be assumed to define the
input device.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">stdin-path</span></code></td>
<td>O</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></td>
<td>A string that specifies the full path to the
node representing the device to be used for
boot console input. If the character “:” is
present in the value it terminates the path.
The value may be an alias.</td>
</tr>
<tr class="row-odd"><td colspan="4">Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All other standard properties (section
<a class="reference internal" href="index.html#sect-standard-properties"><span class="std std-ref">2.3</span></a>) are allowed but are optional.</p>
</div>
<p><strong>Example</strong></p>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="nc">chosen</span> <span class="p">{</span>
    <span class="nf">bootargs</span> <span class="o">=</span> <span class="s">&quot;root=/dev/nfs rw nfsroot=192.168.1.1 console=ttyS0,115200&quot;</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Older versions of devicetrees may be encountered that contain a
deprecated form of the <em>stdout-path</em> property called <em>linux,stdout-path</em>.
For compatibility, a client program might want to support
<em>linux,stdout-path</em> if a <em>stdout-path</em> property is not present. The meaning
and use of the two properties is identical.</p>
</div>
<div class="section" id="cpus-node-properties">
<h3>3.6. <code class="docutils literal notranslate"><span class="pre">/cpus</span></code> Node Properties<a class="headerlink" href="#cpus-node-properties" title="Permalink to this headline">¶</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">/cpus</span></code> node is required for all devicetrees. It does not represent a
real device in the system, but acts as a container for child <code class="docutils literal notranslate"><span class="pre">cpu</span></code> nodes
which represent the systems CPUs.</p>
<table border="1" class="docutils" id="id6">
<caption><span class="caption-number">Table 3.5 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">/cpus</span></code> Node Properties</span><a class="headerlink" href="#id6" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="24%" />
<col width="5%" />
<col width="22%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property Name</th>
<th class="head">Usage</th>
<th class="head">Value Type</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">#address-cells</span></code></td>
<td>R</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>The value specifies how many cells each
element of the <code class="docutils literal notranslate"><span class="pre">reg</span></code> property array takes in
children of this node.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">#size-cells</span></code></td>
<td>R</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Value shall be 0. Specifies that no size is
required in the <code class="docutils literal notranslate"><span class="pre">reg</span></code> property in children of
this node.</td>
</tr>
<tr class="row-even"><td colspan="4">Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All other standard properties (section
<a class="reference internal" href="index.html#sect-standard-properties"><span class="std std-ref">2.3</span></a>) are allowed but are optional.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">/cpus</span></code> node may contain properties that are common across <code class="docutils literal notranslate"><span class="pre">cpu</span></code> nodes.
See section <a class="reference internal" href="#sect-cpus-cpu-node-properties"><span class="std std-ref">3.7</span></a> for details.</p>
<p>For an example, see section <a class="reference internal" href="#sect-cpu-node-example"><span class="std std-ref">3.8.1</span></a>.</p>
</div>
<div class="section" id="cpus-cpu-node-properties">
<span id="sect-cpus-cpu-node-properties"></span><h3>3.7. <code class="docutils literal notranslate"><span class="pre">/cpus/cpu*</span></code> Node Properties<a class="headerlink" href="#cpus-cpu-node-properties" title="Permalink to this headline">¶</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">cpu</span></code> node represents a hardware execution block that is sufficiently
independent that it is capable of running an operating system without
interfering with other CPUs possibly running other operating systems.</p>
<p>Hardware threads that share an MMU would generally be represented under
one <code class="docutils literal notranslate"><span class="pre">cpu</span></code> node. If other more complex CPU topographies are designed, the
binding for the CPU must describe the topography (e.g. threads that
don’t share an MMU).</p>
<p>CPUs and threads are numbered through a unified number-space that should
match as closely as possible the interrupt controller’s numbering of
CPUs/threads.</p>
<p>Properties that have identical values across <code class="docutils literal notranslate"><span class="pre">cpu</span></code> nodes may be placed in
the <code class="docutils literal notranslate"><span class="pre">/cpus</span></code> node instead. A client program must first examine a specific
<code class="docutils literal notranslate"><span class="pre">cpu</span></code> node, but if an expected property is not found then it should look
at the parent <code class="docutils literal notranslate"><span class="pre">/cpus</span></code> node. This results in a less verbose representation
of properties which are identical across all CPUs.</p>
<p>The node name for every CPU node should be <code class="docutils literal notranslate"><span class="pre">cpu</span></code>.</p>
<div class="section" id="general-properties-of-cpus-cpu-nodes">
<h4>3.7.1. General Properties of <code class="docutils literal notranslate"><span class="pre">/cpus/cpu*</span></code> nodes<a class="headerlink" href="#general-properties-of-cpus-cpu-nodes" title="Permalink to this headline">¶</a></h4>
<p>The following table describes the general properties of <code class="docutils literal notranslate"><span class="pre">cpu</span></code> nodes. Some
of the properties described in <a class="reference internal" href="#table-cpu-node-props"><span class="std std-numref">Table 3.6</span></a> are select
standard properties with specific applicable detail.</p>
<span id="table-cpu-node-props"></span><table border="1" class="longtable docutils" id="id7">
<caption><span class="caption-number">Table 3.6 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">/cpus/cpu*</span></code> Node General Properties</span><a class="headerlink" href="#id7" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="23%" />
<col width="5%" />
<col width="19%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property Name</th>
<th class="head">Usage</th>
<th class="head">Value Type</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">device_type</span></code></td>
<td><div class="first last line-block">
<div class="line">R</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></div>
</div>
</td>
<td>Value shall be <code class="docutils literal notranslate"><span class="pre">&quot;cpu&quot;</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">reg</span></code></td>
<td>R</td>
<td>array</td>
<td><p class="first">The value of <em>reg</em> is a <code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code>
that defines a unique CPU/thread id for the
CPU/threads represented by the CPU node.</p>
<p>If a CPU supports more than one thread (i.e.
multiple streams of execution) the <em>reg</em>
property is an array with 1 element per
thread. The <em>#address-cells</em> on the <code class="docutils literal notranslate"><span class="pre">/cpus</span></code> node
specifies how many cells each element of the
array takes. Software can determine the number
of threads by dividing the size of <em>reg</em> by
the parent node’s <em>#address-cells</em>.</p>
<p>If a CPU/thread can be the target of an
external interrupt the <em>reg</em> property value
must be a unique CPU/thread id that is
addressable by the interrupt controller.</p>
<p>If a CPU/thread cannot be the target of an
external interrupt, then <em>reg</em> must be unique
and out of bounds of the range addressed by
the interrupt controller</p>
<p class="last">If a CPU/thread’s PIR (pending interrupt register)
is modifiable, a client
program should modify PIR to match the <em>reg</em>
property value. If PIR cannot be modified and
the PIR value is distinct from the interrupt
controller number space, the CPUs binding may
define a binding-specific representation of
PIR values if desired.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">clock-frequency</span></code></td>
<td><div class="first last line-block">
<div class="line">R</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">array</div>
</div>
</td>
<td><p class="first">Specifies the current clock speed of the CPU
in Hertz. The value is a <code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code>
in one of two forms:</p>
<ul class="last simple">
<li>A 32-bit integer consisting of one <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code>
specifying the frequency.</li>
<li>A 64-bit integer represented as a <code class="docutils literal notranslate"><span class="pre">&lt;u64&gt;</span></code>
specifying the frequency.</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">timebase-frequency</span></code></td>
<td><div class="first last line-block">
<div class="line">R</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">array</div>
</div>
</td>
<td><p class="first">Specifies the current frequency at which the
timebase and decrementer registers are updated
(in Hertz). The value is a
&lt;prop-encoded-array&gt; in one of two forms:</p>
<ul class="last simple">
<li>A 32-bit integer consisting of one <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code>
specifying the frequency.</li>
<li>A 64-bit integer represented as a <code class="docutils literal notranslate"><span class="pre">&lt;u64&gt;</span></code>.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">status</span></code></td>
<td>SD</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></td>
<td><p class="first">A standard property describing the state of a
CPU. This property shall be present for nodes
representing CPUs in a symmetric
multiprocessing (SMP) configuration. For a CPU
node the meaning of the <code class="docutils literal notranslate"><span class="pre">&quot;okay&quot;</span></code> and
<code class="docutils literal notranslate"><span class="pre">&quot;disabled&quot;</span></code> values are as follows:</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">&quot;okay&quot;</span></code> :</dt>
<dd>The CPU is running.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&quot;disabled&quot;</span></code> :</dt>
<dd>The CPU is in a quiescent state.</dd>
</dl>
<p>A quiescent CPU is in a state where it cannot
interfere with the normal operation of other
CPUs, nor can its state be affected by the
normal operation of other running CPUs, except
by an explicit method for enabling or
re-enabling the quiescent CPU (see the
enable-method property).</p>
<p>In particular, a running CPU shall be able to
issue broadcast TLB invalidates without
affecting a quiescent CPU.</p>
<p class="last">Examples: A quiescent CPU could be in a spin
loop, held in reset, and electrically isolated
from the system bus or in another
implementation dependent state.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">enable-method</span></code></td>
<td><div class="first last line-block">
<div class="line">SD</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;stringlist&gt;</span></code></div>
</div>
</td>
<td><p class="first">Describes the method by which a CPU in a
disabled state is enabled. This property is
required for CPUs with a status property with
a value of <code class="docutils literal notranslate"><span class="pre">&quot;disabled&quot;</span></code>. The value consists of
one or more strings that define the method to
release this CPU. If a client program
recognizes any of the methods, it may use it.
The value shall be one of the following:</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">&quot;spin-table&quot;</span></code> :</dt>
<dd>The CPU is enabled with the
spin table method defined in the DTSpec.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&quot;[vendor],[method]&quot;</span></code> :</dt>
<dd>Implementation dependent string that
describes the method by which a CPU is
released from a <code class="docutils literal notranslate"><span class="pre">&quot;disabled&quot;</span></code> state. The
required format is: <code class="docutils literal notranslate"><span class="pre">&quot;[vendor],[method]&quot;</span></code>,
where vendor is a string describing the name of
the manufacturer and method is a string
describing the vendor specific mechanism.</dd>
</dl>
<p>Example: <code class="docutils literal notranslate"><span class="pre">&quot;fsl,MPC8572DS&quot;</span></code></p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Other methods may be added to later
revisions of the DTSpec specification.</p>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">cpu-release-addr</span></code></td>
<td><div class="first last line-block">
<div class="line">SD</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;u64&gt;</span></code></div>
</div>
</td>
<td>The cpu-release-addr property is required for
cpu nodes that have an enable-method property
value of <code class="docutils literal notranslate"><span class="pre">&quot;spin-table&quot;</span></code>. The value specifies the
physical address of a spin table entry that
releases a secondary CPU from its spin loop.</td>
</tr>
<tr class="row-odd"><td colspan="4">Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All other standard properties (section
<a class="reference internal" href="index.html#sect-standard-properties"><span class="std std-ref">2.3</span></a>) are allowed but are optional.</p>
</div>
<table border="1" class="longtable docutils" id="id8">
<caption><span class="caption-number">Table 3.7 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">/cpus/cpu*</span></code> Node Power ISA Properties</span><a class="headerlink" href="#id8" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="29%" />
<col width="5%" />
<col width="14%" />
<col width="52%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property Name</th>
<th class="head">Usage</th>
<th class="head">Value Type</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">power-isa-version</span></code></td>
<td><div class="first last line-block">
<div class="line">O</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></div>
</div>
</td>
<td>A string that specifies the numerical portion
of the Power ISA version string. For example,
for an implementation complying with Power ISA
Version 2.06, the value of this property would
be <code class="docutils literal notranslate"><span class="pre">&quot;2.06&quot;</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">power-isa-*</span></code></td>
<td><div class="first last line-block">
<div class="line">O</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code></div>
</div>
</td>
<td><p class="first">If the <code class="docutils literal notranslate"><span class="pre">power-isa-version</span></code> property exists, then
for each category from the Categories section
of Book I of the Power ISA version indicated,
the existence of a property named
<code class="docutils literal notranslate"><span class="pre">power-isa-[CAT]</span></code>, where <code class="docutils literal notranslate"><span class="pre">[CAT]</span></code> is the
abbreviated category name with all uppercase
letters converted to lowercase, indicates that
the category is supported by the
implementation.</p>
<p class="last">For example, if the power-isa-version property
exists and its value is <code class="docutils literal notranslate"><span class="pre">&quot;2.06&quot;</span></code> and the
power-isa-e.hv property exists, then the
implementation supports
[Category:Embedded.Hypervisor] as defined in
Power ISA Version 2.06.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">cache-op-block-size</span></code></td>
<td><div class="first last line-block">
<div class="line">SD</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></div>
</div>
</td>
<td>Specifies the block size in bytes upon which
cache block instructions operate (e.g., dcbz).
Required if different than the L1 cache block
size.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">reservation-granule-size</span></code></td>
<td><div class="first last line-block">
<div class="line">SD</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></div>
</div>
</td>
<td>Specifies the reservation granule size
supported by this processor in bytes.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">mmu-type</span></code></td>
<td>O</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></td>
<td><p class="first">Specifies the CPU’s MMU type.</p>
<p>Valid values are shown below:</p>
<ul class="last simple">
<li><code class="docutils literal notranslate"><span class="pre">&quot;mpc8xx&quot;</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;ppc40x&quot;</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;ppc440&quot;</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;ppc476&quot;</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;power-embedded&quot;</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;powerpc-classic&quot;</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;power-server-stab&quot;</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;power-server-slb&quot;</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;none&quot;</span></code></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td colspan="4">Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All other standard properties (section
<a class="reference internal" href="index.html#sect-standard-properties"><span class="std std-ref">2.3</span></a>) are allowed but are optional.</p>
</div>
<p>Older versions of devicetree may be encountered that contain a
bus-frequency property on CPU nodes. For compatibility, a client-program
might want to support bus-frequency. The format of the value is
identical to that of clock-frequency. The recommended practice is to
represent the frequency of a bus on the bus node using a clock-frequency
property.</p>
</div>
<div class="section" id="tlb-properties">
<h4>3.7.2. TLB Properties<a class="headerlink" href="#tlb-properties" title="Permalink to this headline">¶</a></h4>
<p>The following properties of a cpu node describe the translate look-aside
buffer in the processor’s MMU.</p>
<table border="1" class="docutils" id="id9">
<caption><span class="caption-number">Table 3.8 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">/cpu/cpu*</span></code> Node Power ISA TLB Properties</span><a class="headerlink" href="#id9" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="17%" />
<col width="6%" />
<col width="14%" />
<col width="63%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property Name</th>
<th class="head">Usage</th>
<th class="head">Value Type</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">tlb-split</span></code></td>
<td>SD</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code></td>
<td>If present specifies that the TLB has a split
configuration, with separate TLBs for
instructions and data. If absent, specifies
that the TLB has a unified configuration.
Required for a CPU with a TLB in a split
configuration.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">tlb-size</span></code></td>
<td>SD</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies the number of entries in the TLB.
Required for a CPU with a unified TLB for
instruction and data addresses.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">tlb-sets</span></code></td>
<td>SD</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies the number of associativity sets in
the TLB. Required for a CPU with a unified TLB
for instruction and data addresses.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">d-tlb-size</span></code></td>
<td>SD</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies the number of entries in the data
TLB. Required for a CPU with a split TLB
configuration.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">d-tlb-sets</span></code></td>
<td>SD</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies the number of associativity sets in
the data TLB. Required for a CPU with a split
TLB configuration.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">i-tlb-size</span></code></td>
<td>SD</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies the number of entries in the
instruction TLB. Required for a CPU with a
split TLB configuration.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">i-tlb-sets</span></code></td>
<td>SD</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies the number of associativity sets in
the instruction TLB. Required for a CPU with a
split TLB configuration.</td>
</tr>
<tr class="row-odd"><td colspan="4">Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All other standard properties (section
<a class="reference internal" href="index.html#sect-standard-properties"><span class="std std-ref">2.3</span></a>) are allowed but are optional.</p>
</div>
</div>
<div class="section" id="internal-l1-cache-properties">
<h4>3.7.3. Internal (L1) Cache Properties<a class="headerlink" href="#internal-l1-cache-properties" title="Permalink to this headline">¶</a></h4>
<p>The following properties of a cpu node describe the processor’s internal
(L1) cache.</p>
<table border="1" class="docutils" id="id10">
<caption><span class="caption-number">Table 3.9 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">/cpu/cpu*</span></code> Node Power ISA Cache Properties</span><a class="headerlink" href="#id10" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="21%" />
<col width="5%" />
<col width="12%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property Name</th>
<th class="head">Usage</th>
<th class="head">Value Type</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">cache-unified</span></code></td>
<td>SD</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code></td>
<td>If present, specifies the cache has a unified
organization. If not present, specifies that
the cache has a Harvard architecture with
separate caches for instructions and data.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">cache-size</span></code></td>
<td>SD</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies the size in bytes of a unified
cache. Required if the cache is unified
(combined instructions and data).</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">cache-sets</span></code></td>
<td>SD</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies the number of associativity sets in
a unified cache. Required if the cache is
unified (combined instructions and data)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">cache-block-size</span></code></td>
<td>SD</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies the block size in bytes of a unified
cache. Required if the processor has a unified
cache (combined instructions and data)</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">cache-line-size</span></code></td>
<td>SD</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies the line size in bytes of a unified
cache, if different than the cache block size
Required if the processor has a unified cache
(combined instructions and data).</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">i-cache-size</span></code></td>
<td>SD</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies the size in bytes of the instruction
cache. Required if the cpu has a separate
cache for instructions.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">i-cache-sets</span></code></td>
<td>SD</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies the number of associativity sets in
the instruction cache. Required if the cpu has
a separate cache for instructions.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">i-cache-block-size</span></code></td>
<td>SD</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies the block size in bytes of the
instruction cache. Required if the cpu has a
separate cache for instructions.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">i-cache-line-size</span></code></td>
<td>SD</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies the line size in bytes of the
instruction cache, if different than the cache
block size. Required if the cpu has a separate
cache for instructions.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">d-cache-size</span></code></td>
<td>SD</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies the size in bytes of the data cache.
Required if the cpu has a separate cache for
data.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">d-cache-sets</span></code></td>
<td>SD</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies the number of associativity sets in
the data cache. Required if the cpu has a
separate cache for data.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">d-cache-block-size</span></code></td>
<td>SD</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies the block size in bytes of the data
cache. Required if the cpu has a separate
cache for data.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">d-cache-line-size</span></code></td>
<td>SD</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies the line size in bytes of the data
cache, if different than the cache block size.
Required if the cpu has a separate cache for
data.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">next-level-cache</span></code></td>
<td>SD</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;phandle&gt;</span></code></td>
<td>If present, indicates that another level of
cache exists. The value is the phandle of the
next level of cache. The phandle value type is
fully described in section <a class="reference internal" href="index.html#sect-standard-properties-phandle"><span class="std std-ref">2.3.3</span></a>.</td>
</tr>
<tr class="row-even"><td colspan="4">Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All other standard properties (section
<a class="reference internal" href="index.html#sect-standard-properties"><span class="std std-ref">2.3</span></a>) are allowed but are optional.</p>
</div>
<p>Older versions of devicetrees may be encountered that contain a
deprecated form of the next-level-cache property called <code class="docutils literal notranslate"><span class="pre">l2-cache</span></code>.
For compatibility, a client-program may wish to support <code class="docutils literal notranslate"><span class="pre">l2-cache</span></code>
if a next-level-cache property is not present.
The meaning and use of the two properties is identical.</p>
</div>
<div class="section" id="example">
<span id="sect-cpu-node-example"></span><h4>3.7.4. Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<p>Here is an example of a <code class="docutils literal notranslate"><span class="pre">/cpus</span></code> node with one child cpu node:</p>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="nc">cpus</span> <span class="p">{</span>
    <span class="nf">#address-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>
    <span class="nf">#size-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">0</span><span class="p">&gt;;</span>
    <span class="nc">cpu</span><span class="nf">@0</span> <span class="p">{</span>
        <span class="nf">device_type</span> <span class="o">=</span> <span class="s">&quot;cpu&quot;</span><span class="p">;</span>
        <span class="nf">reg</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">0</span><span class="p">&gt;;</span>
        <span class="nf">d-cache-block-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">32</span><span class="p">&gt;;</span> <span class="c1">// L1 - 32 bytes</span>
        <span class="nf">i-cache-block-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">32</span><span class="p">&gt;;</span> <span class="c1">// L1 - 32 bytes</span>
        <span class="nf">d-cache-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x8000</span><span class="p">&gt;;</span> <span class="c1">// L1, 32K</span>
        <span class="nf">i-cache-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x8000</span><span class="p">&gt;;</span> <span class="c1">// L1, 32K</span>
        <span class="nf">timebase-frequency</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">82500000</span><span class="p">&gt;;</span> <span class="c1">// 82.5 MHz</span>
        <span class="nf">clock-frequency</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">825000000</span><span class="p">&gt;;</span> <span class="c1">// 825 MHz</span>
    <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="multi-level-and-shared-cache-nodes-cpus-cpu-l-cache">
<h3>3.8. Multi-level and Shared Cache Nodes (<code class="docutils literal notranslate"><span class="pre">/cpus/cpu*/l?-cache</span></code>)<a class="headerlink" href="#multi-level-and-shared-cache-nodes-cpus-cpu-l-cache" title="Permalink to this headline">¶</a></h3>
<p>Processors and systems may implement additional levels of cache hierarchy.
For example, second-level (L2) or third-level (L3) caches.
These caches can potentially be tightly integrated to the CPU or
possibly shared between multiple CPUs.</p>
<p>A device node with a compatible value of <code class="docutils literal notranslate"><span class="pre">&quot;cache&quot;</span></code> describes these types
of caches.</p>
<p>The cache node shall define a phandle property, and all cpu nodes or
cache nodes that are associated with or share the cache each shall
contain a next-level-cache property that specifies the phandle to the
cache node.</p>
<p>A cache node may be represented under a CPU node or any other
appropriate location in the devicetree.</p>
<p>Multiple-level and shared caches are represented with the properties in
Table 3-9. The L1 cache properties are described in Table 3-8.</p>
<table border="1" class="docutils" id="id11">
<caption><span class="caption-number">Table 3.10 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">/cpu/cpu*/l?-cache</span></code> Node Power ISA Multiple-level and Shared Cache Properties</span><a class="headerlink" href="#id11" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="19%" />
<col width="6%" />
<col width="15%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property Name</th>
<th class="head">Usage</th>
<th class="head">Value Type</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">compatible</span></code></td>
<td>R</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></td>
<td>A standard property. The value shall include
the string <code class="docutils literal notranslate"><span class="pre">&quot;cache&quot;</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">cache-level</span></code></td>
<td>R</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies the level in the cache hierarchy.
For example, a level 2 cache has a value of 2.</td>
</tr>
<tr class="row-even"><td colspan="4">Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All other standard properties (section
<a class="reference internal" href="index.html#sect-standard-properties"><span class="std std-ref">2.3</span></a>) are allowed but are optional.</p>
</div>
<div class="section" id="id1">
<h4>3.8.1. Example<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>See the following example of a devicetree representation of two CPUs,
each with their own on-chip L2 and a shared L3.</p>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="nc">cpus</span> <span class="p">{</span>
    <span class="nf">#address-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>
    <span class="nf">#size-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">0</span><span class="p">&gt;;</span>
    <span class="nc">cpu</span><span class="nf">@0</span> <span class="p">{</span>
        <span class="nf">device_type</span> <span class="o">=</span> <span class="s">&quot;cpu&quot;</span><span class="p">;</span>
        <span class="nf">reg</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">0</span><span class="p">&gt;;</span>
        <span class="nf">cache-unified</span><span class="p">;</span>
        <span class="nf">cache-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x8000</span><span class="p">&gt;;</span> <span class="c1">// L1, 32 KB</span>
        <span class="nf">cache-block-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">32</span><span class="p">&gt;;</span>
        <span class="nf">timebase-frequency</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">82500000</span><span class="p">&gt;;</span> <span class="c1">// 82.5 MHz</span>
        <span class="nf">next-level-cache</span> <span class="o">=</span> <span class="p">&lt;</span><span class="o">&amp;</span>L2_0<span class="p">&gt;;</span> <span class="c1">// phandle to L2</span>

        <span class="nl">L2_0:</span><span class="nc">l2-cache</span> <span class="p">{</span>
            <span class="nf">compatible</span> <span class="o">=</span> <span class="s">&quot;cache&quot;</span><span class="p">;</span>
            <span class="nf">cache-unified</span><span class="p">;</span>
            <span class="nf">cache-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x40000</span><span class="p">&gt;;</span> <span class="c1">// 256 KB</span>

            <span class="nf">cache-sets</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1024</span><span class="p">&gt;;</span>
            <span class="nf">cache-block-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">32</span><span class="p">&gt;;</span>
            <span class="nf">cache-level</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">2</span><span class="p">&gt;;</span>
            <span class="nf">next-level-cache</span> <span class="o">=</span> <span class="p">&lt;</span><span class="o">&amp;</span>L3<span class="p">&gt;;</span> <span class="c1">// phandle to L3</span>

            <span class="nl">L3:</span><span class="nc">l3-cache</span> <span class="p">{</span>
                <span class="nf">compatible</span> <span class="o">=</span> <span class="s">&quot;cache&quot;</span><span class="p">;</span>
                <span class="nf">cache-unified</span><span class="p">;</span>
                <span class="nf">cache-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x40000</span><span class="p">&gt;;</span> <span class="c1">// 256 KB</span>
                <span class="nf">cache-sets</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x400</span><span class="p">&gt;;</span> <span class="c1">// 1024</span>
                <span class="nf">cache-block-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">32</span><span class="p">&gt;;</span>
                <span class="nf">cache-level</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">3</span><span class="p">&gt;;</span>
            <span class="p">};</span>
        <span class="p">};</span>
    <span class="p">};</span>

    <span class="nc">cpu</span><span class="nf">@1</span> <span class="p">{</span>
        <span class="nf">device_type</span> <span class="o">=</span> <span class="s">&quot;cpu&quot;</span><span class="p">;</span>
        <span class="nf">reg</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>
        <span class="nf">cache-unified</span><span class="p">;</span>
        <span class="nf">cache-block-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">32</span><span class="p">&gt;;</span>
        <span class="nf">cache-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x8000</span><span class="p">&gt;;</span> <span class="c1">// L1, 32 KB</span>
        <span class="nf">timebase-frequency</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">82500000</span><span class="p">&gt;;</span> <span class="c1">// 82.5 MHz</span>
        <span class="nf">clock-frequency</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">825000000</span><span class="p">&gt;;</span> <span class="c1">// 825 MHz</span>
        <span class="nf">cache-level</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">2</span><span class="p">&gt;;</span>
        <span class="nf">next-level-cache</span> <span class="o">=</span> <span class="p">&lt;</span><span class="o">&amp;</span>L2_1<span class="p">&gt;;</span> <span class="c1">// phandle to L2</span>
        <span class="nl">L2_1:</span><span class="nc">l2-cache</span> <span class="p">{</span>
            <span class="nf">compatible</span> <span class="o">=</span> <span class="s">&quot;cache&quot;</span><span class="p">;</span>
            <span class="nf">cache-unified</span><span class="p">;</span>
            <span class="nf">cache-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x40000</span><span class="p">&gt;;</span> <span class="c1">// 256 KB</span>
            <span class="nf">cache-sets</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x400</span><span class="p">&gt;;</span> <span class="c1">// 1024</span>
            <span class="nf">cache-line-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">32</span><span class="p">&gt;;</span> <span class="c1">// 32 bytes</span>
            <span class="nf">next-level-cache</span> <span class="o">=</span> <span class="p">&lt;</span><span class="o">&amp;</span>L3<span class="p">&gt;;</span> <span class="c1">// phandle to L3</span>
        <span class="p">};</span>
    <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-device-bindings"></span><div class="section" id="device-bindings">
<span id="chapter-device-bindings"></span><h2>4. Device Bindings<a class="headerlink" href="#device-bindings" title="Permalink to this headline">¶</a></h2>
<p>This chapter contains requirements, known as bindings, for how specific
types and classes of devices are represented in the devicetree. The
compatible property of a device node describes the specific binding (or
bindings) to which the node complies.</p>
<p>Bindings may be defined as extensions of other each. For example a new
bus type could be defined as an extension of the simple-bus binding. In
this case, the compatible property would contain several strings
identifying each binding—from the most specific to the most general (see
section <a class="reference internal" href="index.html#sect-standard-properties-compatible"><span class="std std-ref">2.3.1</span></a>, compatible).</p>
<div class="section" id="binding-guidelines">
<h3>4.1. Binding Guidelines<a class="headerlink" href="#binding-guidelines" title="Permalink to this headline">¶</a></h3>
<div class="section" id="general-principles">
<h4>4.1.1. General Principles<a class="headerlink" href="#general-principles" title="Permalink to this headline">¶</a></h4>
<p>When creating a new devicetree representation for a device, a binding
should be created that fully describes the required properties and value
of the device. This set of properties shall be sufficiently descriptive
to provide device drivers with needed attributes of the device.</p>
<p>Some recommended practices include:</p>
<ol class="arabic">
<li><p class="first">Define a compatible string using the conventions described in section
<a class="reference internal" href="index.html#sect-standard-properties-compatible"><span class="std std-ref">2.3.1</span></a>.</p>
</li>
<li><p class="first">Use the standard properties (defined in sections
<a class="reference internal" href="index.html#sect-standard-properties"><span class="std std-ref">2.3</span></a> and <a class="reference internal" href="index.html#sect-interrupts"><span class="std std-ref">2.4</span></a>) as
applicable for the new device. This usage typically includes the
<code class="docutils literal notranslate"><span class="pre">reg</span></code> and <code class="docutils literal notranslate"><span class="pre">interrupts</span></code> properties at a minimum.</p>
</li>
<li><p class="first">Use the conventions specified in section <a class="reference internal" href="#chapter-device-bindings"><span class="std std-ref">4</span></a>
(Device Bindings) if the new device fits into one the DTSpec defined
device classes.</p>
</li>
<li><p class="first">Use the miscellaneous property conventions specified in section
<a class="reference internal" href="#sect-misc-properties"><span class="std std-ref">4.1.2</span></a>, if applicable.</p>
</li>
<li><p class="first">If new properties are needed by the binding, the recommended format
for property names is: <code class="docutils literal notranslate"><span class="pre">&quot;&lt;company&gt;,&lt;property-name&gt;&quot;</span></code>, where <code class="docutils literal notranslate"><span class="pre">&lt;company&gt;</span></code>
is an OUI or short unique string like a stock ticker that identifies
the creator of the binding.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">&quot;ibm,ppc-interrupt-server#s&quot;</span></code></p>
</li>
</ol>
</div>
<div class="section" id="miscellaneous-properties">
<span id="sect-misc-properties"></span><h4>4.1.2. Miscellaneous Properties<a class="headerlink" href="#miscellaneous-properties" title="Permalink to this headline">¶</a></h4>
<p>This section defines a list of helpful properties that might be
applicable to many types of devices and device classes. They are defined
here to facilitate standardization of names and usage.</p>
<div class="section" id="clock-frequency-property">
<h5>4.1.2.1. <code class="docutils literal notranslate"><span class="pre">clock-frequency</span></code> Property<a class="headerlink" href="#clock-frequency-property" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils" id="id3">
<caption><span class="caption-number">Table 4.1 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">clock-frequency</span></code> Property</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head"><code class="docutils literal notranslate"><span class="pre">clock-frequency</span></code></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Value type</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code></td>
</tr>
<tr class="row-odd"><td>Description</td>
<td><p class="first">Specifies the frequency of a clock in Hz. The value is a
<code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> in one of two forms:</p>
<p>a 32-bit integer consisting of one <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code> specifying the
frequency</p>
<p class="last">a 64-bit integer represented as a <code class="docutils literal notranslate"><span class="pre">&lt;u64&gt;</span></code> specifying the
frequency</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="reg-shift-property">
<h5>4.1.2.2. <code class="docutils literal notranslate"><span class="pre">reg-shift</span></code> Property<a class="headerlink" href="#reg-shift-property" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils" id="id4">
<caption><span class="caption-number">Table 4.2 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">reg-shift</span></code> Property</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head"><code class="docutils literal notranslate"><span class="pre">reg-shift</span></code></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Value type</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
</tr>
<tr class="row-odd"><td>Description</td>
<td><p class="first">The <code class="docutils literal notranslate"><span class="pre">reg-shift</span></code> property provides a mechanism to represent
devices that are identical in most respects except for the
number of bytes between registers. The <code class="docutils literal notranslate"><span class="pre">reg-shift</span></code> property
specifies in bytes how far the discrete device registers are
separated from each other. The individual register location
is calculated by using following formula: “registers address”
&lt;&lt; reg-shift. If unspecified, the default value is 0.</p>
<p class="last">For example, in a system where 16540 UART registers are
located at addresses 0x0, 0x4, 0x8, 0xC, 0x10, 0x14, 0x18,
and 0x1C, a <code class="docutils literal notranslate"><span class="pre">reg-shift</span> <span class="pre">=</span> <span class="pre">&lt;2&gt;</span></code>
property would be used to specify register locations.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="label-property">
<h5>4.1.2.3. <code class="docutils literal notranslate"><span class="pre">label</span></code> Property<a class="headerlink" href="#label-property" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils" id="id5">
<caption><span class="caption-number">Table 4.3 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">label</span></code> Property</span><a class="headerlink" href="#id5" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head"><code class="docutils literal notranslate"><span class="pre">label</span></code></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Value type</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></td>
</tr>
<tr class="row-odd"><td>Description</td>
<td>The label property defines a human readable string describing
a device. The binding for a given device specifies the exact
meaning of the property for that device.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="serial-devices">
<h3>4.2. Serial devices<a class="headerlink" href="#serial-devices" title="Permalink to this headline">¶</a></h3>
<div class="section" id="serial-class-binding">
<h4>4.2.1. Serial Class Binding<a class="headerlink" href="#serial-class-binding" title="Permalink to this headline">¶</a></h4>
<p>The class of serial devices consists of various types of point to point
serial line devices. Examples of serial line devices include the 8250
UART, 16550 UART, HDLC device, and BISYNC device. In most cases hardware
compatible with the RS-232 standard fit into the serial device class.</p>
<p>I<sup>2</sup>C and SPI (Serial Peripheral Interface) devices shall not
be represented as serial port devices because they have their own
specific representation.</p>
<div class="section" id="id1">
<h5>4.2.1.1. <code class="docutils literal notranslate"><span class="pre">clock-frequency</span></code> Property<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils" id="id6">
<caption><span class="caption-number">Table 4.4 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">clock-frequecy</span></code> Property</span><a class="headerlink" href="#id6" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head"><code class="docutils literal notranslate"><span class="pre">clock-frequency</span></code></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Value type</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
</tr>
<tr class="row-odd"><td>Description</td>
<td>Specifies the frequency in Hertz of the baud rate generator’s
input clock.</td>
</tr>
<tr class="row-even"><td>Example</td>
<td><code class="docutils literal notranslate"><span class="pre">clock-frequency</span> <span class="pre">=</span> <span class="pre">&lt;100000000&gt;;</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="current-speed-property">
<h5>4.2.1.2. <code class="docutils literal notranslate"><span class="pre">current-speed</span></code> Property<a class="headerlink" href="#current-speed-property" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils" id="id7">
<caption><span class="caption-number">Table 4.5 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">current-speed</span></code> Property</span><a class="headerlink" href="#id7" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head"><code class="docutils literal notranslate"><span class="pre">current-speed</span></code></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Value type</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
</tr>
<tr class="row-odd"><td>Description</td>
<td>Specifies the current speed of a serial device in bits per
second. A boot program should set this property if it has
initialized the serial device.</td>
</tr>
<tr class="row-even"><td>Example</td>
<td>115,200 Baud: <code class="docutils literal notranslate"><span class="pre">current-speed</span> <span class="pre">=</span> <span class="pre">&lt;115200&gt;;</span></code></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="national-semiconductor-16450-16550-compatible-uart-requirements">
<h4>4.2.2. National Semiconductor 16450/16550 Compatible UART Requirements<a class="headerlink" href="#national-semiconductor-16450-16550-compatible-uart-requirements" title="Permalink to this headline">¶</a></h4>
<p>Serial devices compatible to the National Semiconductor 16450/16550 UART
(Universal Asynchronous Receiver Transmitter) should be represented in
the devicetree using following properties.</p>
<table border="1" class="docutils" id="id8">
<caption><span class="caption-number">Table 4.6 </span><span class="caption-text">ns16550 UART Properties</span><a class="headerlink" href="#id8" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="22%" />
<col width="5%" />
<col width="20%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property Name</th>
<th class="head">Usage</th>
<th class="head">Value Type</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">compatible</span></code></td>
<td>R</td>
<td>&lt;string list&gt;</td>
<td>Value shall include “ns16550”.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">clock-frequency</span></code></td>
<td>R</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies the frequency (in Hz) of the baud
rate generator’s input clock</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">current-speed</span></code></td>
<td>OR</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies current serial device speed in bits
per second</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">reg</span></code></td>
<td>R</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;prop</span> <span class="pre">encoded</span>
<span class="pre">array&gt;</span></code></td>
<td>Specifies the physical address of the
registers device within the address space of
the parent bus</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">interrupts</span></code></td>
<td>OR</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;prop</span> <span class="pre">encoded</span>
<span class="pre">array&gt;</span></code></td>
<td>Specifies the interrupts generated by this
device. The value of the interrupts property
consists of one or more interrupt specifiers.
The format of an interrupt specifier is
defined by the binding document describing the
node’s interrupt parent.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">reg-shift</span></code></td>
<td>O</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Specifies in bytes how far the discrete device
registers are separated from each other. The
individual register location is calculated by
using following formula: <code class="docutils literal notranslate"><span class="pre">&quot;registers</span> <span class="pre">address&quot;</span>
<span class="pre">&lt;&lt;</span> <span class="pre">reg-shift</span></code>. If unspecified, the default
value is 0.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">virtual-reg</span></code></td>
<td>SD</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code>
or
<code class="docutils literal notranslate"><span class="pre">&lt;u64&gt;</span></code></td>
<td>See section <a class="reference internal" href="index.html#sect-standard-properties-virtual-reg"><span class="std std-ref">2.3.7</span></a>.
Specifies an effective address that maps to the
first physical address specified in the <code class="docutils literal notranslate"><span class="pre">reg</span></code>
property. This property is required if this
device node is the system’s console.</td>
</tr>
<tr class="row-odd"><td colspan="4">Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All other standard properties (section
<a class="reference internal" href="index.html#sect-standard-properties"><span class="std std-ref">2.3</span></a>) are allowed but are optional.</p>
</div>
</div>
</div>
<div class="section" id="network-devices">
<h3>4.3. Network devices<a class="headerlink" href="#network-devices" title="Permalink to this headline">¶</a></h3>
<p>Network devices are packet oriented communication devices. Devices in
this class are assumed to implement the data link layer (layer 2) of the
seven-layer OSI model and use Media Access Control (MAC) addresses.
Examples of network devices include Ethernet, FDDI, 802.11, and
Token-Ring.</p>
<div class="section" id="network-class-binding">
<h4>4.3.1. Network Class Binding<a class="headerlink" href="#network-class-binding" title="Permalink to this headline">¶</a></h4>
<div class="section" id="address-bits-property">
<h5>4.3.1.1. <code class="docutils literal notranslate"><span class="pre">address-bits</span></code> Property<a class="headerlink" href="#address-bits-property" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils" id="id9">
<caption><span class="caption-number">Table 4.7 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">address-bits</span></code> Property</span><a class="headerlink" href="#id9" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head"><code class="docutils literal notranslate"><span class="pre">address-bits</span></code></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Value type</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
</tr>
<tr class="row-odd"><td>Description</td>
<td>Specifies number of address bits required to address the
device described by this node. This property specifies number
of bits in MAC address. If unspecified, the default value is 48.</td>
</tr>
<tr class="row-even"><td>Example</td>
<td><code class="docutils literal notranslate"><span class="pre">address-bits</span> <span class="pre">=</span> <span class="pre">&lt;48&gt;;</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="local-mac-address-property">
<h5>4.3.1.2. <code class="docutils literal notranslate"><span class="pre">local-mac-address</span></code> Property<a class="headerlink" href="#local-mac-address-property" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils" id="id10">
<caption><span class="caption-number">Table 4.8 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">local-mac-address</span></code> Property</span><a class="headerlink" href="#id10" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head"><code class="docutils literal notranslate"><span class="pre">local-mac-address</span></code></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Value type</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> encoded as an array of hex numbers</td>
</tr>
<tr class="row-odd"><td>Description</td>
<td>Specifies MAC address that was assigned to the network device
described by the node containing this property.</td>
</tr>
<tr class="row-even"><td>Example</td>
<td><code class="docutils literal notranslate"><span class="pre">local-mac-address</span> <span class="pre">=</span> <span class="pre">[</span> <span class="pre">00</span> <span class="pre">00</span> <span class="pre">12</span> <span class="pre">34</span> <span class="pre">56</span> <span class="pre">78</span> <span class="pre">];</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="mac-address-property">
<h5>4.3.1.3. <code class="docutils literal notranslate"><span class="pre">mac-address</span></code> Property<a class="headerlink" href="#mac-address-property" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils" id="id11">
<caption><span class="caption-number">Table 4.9 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">mac-address</span></code> Property</span><a class="headerlink" href="#id11" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head"><code class="docutils literal notranslate"><span class="pre">mac-address</span></code></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Value type</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> encoded as an array of hex numbers</td>
</tr>
<tr class="row-odd"><td>Description</td>
<td>Specifies the MAC address that was last used by the boot
program. This property should be used in cases where the MAC
address assigned to the device by the boot program is
different from the local-mac-address property. This property
shall be used only if the value differs from
local-mac-address property value.</td>
</tr>
<tr class="row-even"><td>Example</td>
<td><code class="docutils literal notranslate"><span class="pre">mac-address</span> <span class="pre">=</span> <span class="pre">[</span> <span class="pre">01</span> <span class="pre">02</span> <span class="pre">03</span> <span class="pre">04</span> <span class="pre">05</span> <span class="pre">06</span> <span class="pre">];</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="max-frame-size-property">
<h5>4.3.1.4. <code class="docutils literal notranslate"><span class="pre">max-frame-size</span></code> Property<a class="headerlink" href="#max-frame-size-property" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils" id="id12">
<caption><span class="caption-number">Table 4.10 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">max-frame-size</span></code> Property</span><a class="headerlink" href="#id12" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head"><code class="docutils literal notranslate"><span class="pre">max-frame-size</span></code></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Value type</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
</tr>
<tr class="row-odd"><td>Description</td>
<td>Specifies maximum packet length in bytes that the physical
interface can send and receive.</td>
</tr>
<tr class="row-even"><td>Example</td>
<td><code class="docutils literal notranslate"><span class="pre">max-frame-size</span> <span class="pre">=</span> <span class="pre">&lt;1518&gt;;</span></code></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="ethernet-specific-considerations">
<h4>4.3.2. Ethernet specific considerations<a class="headerlink" href="#ethernet-specific-considerations" title="Permalink to this headline">¶</a></h4>
<p>Network devices based on the IEEE 802.3 collections of LAN standards
(collectively referred to as Ethernet) may be represented in the devicetree
using following properties, in addition to properties specified of
the network device class.</p>
<p>The properties listed in this section augment the properties listed in
the network device class.</p>
<div class="section" id="max-speed-property">
<h5>4.3.2.1. <code class="docutils literal notranslate"><span class="pre">max-speed</span></code> Property<a class="headerlink" href="#max-speed-property" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils" id="id13">
<caption><span class="caption-number">Table 4.11 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">max-speed</span></code> Property</span><a class="headerlink" href="#id13" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head"><code class="docutils literal notranslate"><span class="pre">max-speed</span></code></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Value type</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
</tr>
<tr class="row-odd"><td>Description</td>
<td>Specifies maximum speed (specified in megabits per second)
supported the device.</td>
</tr>
<tr class="row-even"><td>Example</td>
<td><code class="docutils literal notranslate"><span class="pre">max-speed</span> <span class="pre">=</span> <span class="pre">&lt;1000&gt;;</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="phy-connection-type-property">
<h5>4.3.2.2. <code class="docutils literal notranslate"><span class="pre">phy-connection-type</span></code> Property<a class="headerlink" href="#phy-connection-type-property" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils" id="id14">
<caption><span class="caption-number">Table 4.12 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">phy-connection-type</span></code> Property</span><a class="headerlink" href="#id14" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head"><code class="docutils literal notranslate"><span class="pre">phy-connection-type</span></code></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Value type</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></td>
</tr>
<tr class="row-odd"><td>Description</td>
<td><p class="first">Specifies interface type between the Ethernet device and a
physical layer (PHY) device. The value of this property is
specific to the implementation.</p>
<p class="last">Recommended values are shown in the following table.</p>
</td>
</tr>
<tr class="row-even"><td>Example</td>
<td><code class="docutils literal notranslate"><span class="pre">phy-connection-type</span> <span class="pre">=</span> <span class="pre">&quot;mii&quot;;</span></code></td>
</tr>
</tbody>
</table>
<table border="1" class="docutils" id="id15">
<caption><span class="caption-number">Table 4.13 </span><span class="caption-text">Defined values for the <code class="docutils literal notranslate"><span class="pre">phy-connection-type</span></code> Property</span><a class="headerlink" href="#id15" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="78%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Connection type</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Media Independent Interface</td>
<td><code class="docutils literal notranslate"><span class="pre">mii</span></code></td>
</tr>
<tr class="row-odd"><td>Reduced Media Independent Interface</td>
<td><code class="docutils literal notranslate"><span class="pre">rmii</span></code></td>
</tr>
<tr class="row-even"><td>Gigabit Media Independent Interface</td>
<td><code class="docutils literal notranslate"><span class="pre">gmii</span></code></td>
</tr>
<tr class="row-odd"><td>Reduced Gigabit Media Independent</td>
<td><code class="docutils literal notranslate"><span class="pre">rgmii</span></code></td>
</tr>
<tr class="row-even"><td>rgmii with internal delay</td>
<td><code class="docutils literal notranslate"><span class="pre">rgmii-id</span></code></td>
</tr>
<tr class="row-odd"><td>rgmii with internal delay on TX only</td>
<td><code class="docutils literal notranslate"><span class="pre">rgmii-txid</span></code></td>
</tr>
<tr class="row-even"><td>rgmii with internal delay on RX only</td>
<td><code class="docutils literal notranslate"><span class="pre">rgmii-rxid</span></code></td>
</tr>
<tr class="row-odd"><td>Ten Bit Interface</td>
<td><code class="docutils literal notranslate"><span class="pre">tbi</span></code></td>
</tr>
<tr class="row-even"><td>Reduced Ten Bit Interface</td>
<td><code class="docutils literal notranslate"><span class="pre">rtbi</span></code></td>
</tr>
<tr class="row-odd"><td>Serial Media Independent Interface</td>
<td><code class="docutils literal notranslate"><span class="pre">smii</span></code></td>
</tr>
<tr class="row-even"><td>Serial Gigabit Media Independent Interface</td>
<td><code class="docutils literal notranslate"><span class="pre">sgmii</span></code></td>
</tr>
<tr class="row-odd"><td>Reverse Media Independent Interface</td>
<td><code class="docutils literal notranslate"><span class="pre">rev-mii</span></code></td>
</tr>
<tr class="row-even"><td>10 Gigabits Media Independent Interface</td>
<td><code class="docutils literal notranslate"><span class="pre">xgmii</span></code></td>
</tr>
<tr class="row-odd"><td>Multimedia over Coaxial</td>
<td><code class="docutils literal notranslate"><span class="pre">moca</span></code></td>
</tr>
<tr class="row-even"><td>Quad Serial Gigabit Media Independent Interface</td>
<td><code class="docutils literal notranslate"><span class="pre">qsgmii</span></code></td>
</tr>
<tr class="row-odd"><td>Turbo Reduced Gigabit Media Independent Interface</td>
<td><code class="docutils literal notranslate"><span class="pre">trgmii</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="phy-handle-property">
<h5>4.3.2.3. <code class="docutils literal notranslate"><span class="pre">phy-handle</span></code> Property<a class="headerlink" href="#phy-handle-property" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils" id="id16">
<caption><span class="caption-number">Table 4.14 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">phy-handle</span></code> Property</span><a class="headerlink" href="#id16" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head"><code class="docutils literal notranslate"><span class="pre">phy-handle</span></code></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Value type</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;phandle&gt;</span></code></td>
</tr>
<tr class="row-odd"><td>Description</td>
<td>Specifies a reference to a node representing a physical layer
(PHY) device connected to this Ethernet device. This property
is required in case where the Ethernet device is connected a
physical layer device.</td>
</tr>
<tr class="row-even"><td>Example</td>
<td><code class="docutils literal notranslate"><span class="pre">phy-handle</span> <span class="pre">=</span> <span class="pre">&lt;&amp;PHY0&gt;;</span></code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="power-isa-open-pic-interrupt-controllers">
<h3>4.4. Power ISA Open PIC Interrupt Controllers<a class="headerlink" href="#power-isa-open-pic-interrupt-controllers" title="Permalink to this headline">¶</a></h3>
<p>This section specifies the requirements for representing Open PIC
compatible interrupt controllers. An Open PIC interrupt controller
implements the Open PIC architecture (developed jointly by AMD and
Cyrix) and specified in The Open Programmable Interrupt Controller (PIC)
Register Interface Specification Revision 1.2 <a class="reference internal" href="index.html#b18" id="id2">[b18]</a>.</p>
<p>Interrupt specifiers in an Open PIC interrupt domain are encoded with
two cells. The first cell defines the interrupt number. The second cell
defines the sense and level information.</p>
<p>Sense and level information shall be encoded as follows in interrupt
specifiers:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>0 = low to high edge sensitive type enabled
1 = active low level sensitive type enabled
2 = active high level sensitive type enabled
3 = high to low edge sensitive type enabled
</pre></div>
</div>
</div></blockquote>
<table border="1" class="docutils" id="id17">
<caption><span class="caption-number">Table 4.15 </span><span class="caption-text">Open-PIC properties</span><a class="headerlink" href="#id17" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="24%" />
<col width="5%" />
<col width="21%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property Name</th>
<th class="head">Usage</th>
<th class="head">Value Type</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">compatible</span></code></td>
<td>R</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></td>
<td>Value shall include <code class="docutils literal notranslate"><span class="pre">&quot;open-pic&quot;</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">reg</span></code></td>
<td>R</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;prop</span> <span class="pre">encoded</span>
<span class="pre">array&gt;</span></code></td>
<td>Specifies the physical address of the
registers device within the address space of
the parent bus</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">interrupt-controller</span></code></td>
<td>R</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code></td>
<td>Specifies that this node is an interrupt controller</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">#interrupt-cells</span></code></td>
<td>R</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Shall be 2.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">#address-cells</span></code></td>
<td>R</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></td>
<td>Shall be 0.</td>
</tr>
<tr class="row-odd"><td colspan="4">Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All other standard properties (section
<a class="reference internal" href="index.html#sect-standard-properties"><span class="std std-ref">2.3</span></a>) are allowed but are optional.</p>
</div>
</div>
<div class="section" id="simple-bus-compatible-value">
<span id="sect-bindings-simple-bus"></span><h3>4.5. <code class="docutils literal notranslate"><span class="pre">simple-bus</span></code> Compatible Value<a class="headerlink" href="#simple-bus-compatible-value" title="Permalink to this headline">¶</a></h3>
<p>System-on-a-chip processors may have an internal I/O bus that cannot be
probed for devices. The devices on the bus can be accessed directly
without additional configuration required. This type of bus is
represented as a node with a compatible value of “simple-bus”.</p>
<table border="1" class="docutils" id="id18">
<caption><span class="caption-number">Table 4.16 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">simple-bus</span></code> Compatible Node Properties</span><a class="headerlink" href="#id18" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="25%" />
<col width="5%" />
<col width="22%" />
<col width="48%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property Name</th>
<th class="head">Usage</th>
<th class="head">Value Type</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">compatible</span></code></td>
<td>R</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></td>
<td>Value shall include “simple-bus”.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">ranges</span></code></td>
<td>R</td>
<td><code class="docutils literal notranslate"><span class="pre">&lt;prop</span> <span class="pre">encoded</span>
<span class="pre">array&gt;</span></code></td>
<td>This property represents the mapping between
parent address to child address spaces (see
section <a class="reference internal" href="index.html#sect-standard-properties-ranges"><span class="std std-ref">2.3.8</span></a>,
ranges).</td>
</tr>
<tr class="row-even"><td colspan="4">Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</td>
</tr>
</tbody>
</table>
</div>
</div>
<span id="document-flattened-format"></span><div class="section" id="flattened-devicetree-dtb-format">
<span id="chapter-fdt-structure"></span><h2>5. Flattened Devicetree (DTB) Format<a class="headerlink" href="#flattened-devicetree-dtb-format" title="Permalink to this headline">¶</a></h2>
<p>The Devicetree Blob (DTB) format is a flat binary encoding of devicetree data.
It used to exchange devicetree data between software programs.
For example, when booting an operating system, firmware will pass a DTB to the OS kernel.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">IEEE1275 Open Firmware [IEEE1275] does not define the DTB format.
On most Open Firmware compliant platforms the devicetree is extracted by calling firmware methods
to walk through the tree structure.</p>
</div>
<p>The DTB format encodes the devicetree data within a single, linear, pointerless data structure.
It consists of a small header
(see section <a class="reference internal" href="#sect-fdt-header"><span class="std std-ref">5.2</span></a>),
followed by three variable sized sections:
the memory reservation block (see section <a class="reference internal" href="#sect-fdt-memory-reservation-block"><span class="std std-ref">5.3</span></a>),
the structure block (see secton <a class="reference internal" href="#sect-fdt-structure-block"><span class="std std-ref">5.4</span></a>),
and the strings block (see section <a class="reference internal" href="#sect-fdt-strings-block"><span class="std std-ref">5.5</span></a>).
These should be present in the flattened devicetree in that order.
Thus, the devicetree structure as a whole, when loaded into memory at address,
will resemble the diagram in <a class="reference internal" href="#figure-device-tree-structure"><span class="std std-numref">Fig. 5.1</span></a>
(lower addresses are at the top of the diagram).</p>
<div class="figure" id="id1">
<span id="figure-device-tree-structure"></span><div class="graphviz"><img src="_images/graphviz-b5aa4014171b1529d167469518b57197f06cdf75.png" alt="digraph tree {
rankdir = LR
ranksep = &quot;1.5&quot;
size = &quot;6,8&quot;
edge [ dir=&quot;none&quot; ]
node [ shape=&quot;Mrecord&quot; width=&quot;2.5&quot; ]

&quot;node&quot; [ label = &quot;struct ftd_header |
   (free space) |
   memory reservation block |
   (free space) |
   structure block |
   (free space) |
   strings block |
   (free space)&quot; ]
}" class="graphviz" /></div>
<p class="caption"><span class="caption-number">Fig. 5.1 </span><span class="caption-text">Devicetree .dtb Structure</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>The (free space) sections may not be present, though in some cases they
might be required to satisfy the alignment constraints of the individual
blocks (see section <a class="reference internal" href="#sect-fdt-alignment"><span class="std std-ref">5.6</span></a>).</p>
<div class="section" id="versioning">
<span id="sect-fdt-versioning"></span><h3>5.1. Versioning<a class="headerlink" href="#versioning" title="Permalink to this headline">¶</a></h3>
<p>Several versions of the flattened devicetree structure have been defined since
the original definition of the format. Fields in the header give the version,
so that the client program can determine if the devicetree is encoded in a
compatible format.</p>
<p>This document describes only version 17 of the format. DTSpec compliant boot
programs shall provide a devicetree of version 17 or later, and should provide
a devicetree of a version that is backwards compatible with version 16.
DTSpec compliant client programs shall accept devicetrees of any version
backwards compatible with version 17 and may accept other versions as well.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The version is with respect to the binary structure of the device
tree, not its content.</p>
</div>
</div>
<div class="section" id="header">
<span id="sect-fdt-header"></span><h3>5.2. Header<a class="headerlink" href="#header" title="Permalink to this headline">¶</a></h3>
<p>The layout of the header for the devicetree is defined by the following
C structure. All the header fields are 32-bit integers, stored in
big-endian format.</p>
<p><strong>Flattened Devicetree Header Fields</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">fdt_header</span> <span class="p">{</span>
    <span class="kt">uint32_t</span> <span class="n">magic</span><span class="p">;</span>
    <span class="kt">uint32_t</span> <span class="n">totalsize</span><span class="p">;</span>
    <span class="kt">uint32_t</span> <span class="n">off_dt_struct</span><span class="p">;</span>
    <span class="kt">uint32_t</span> <span class="n">off_dt_strings</span><span class="p">;</span>
    <span class="kt">uint32_t</span> <span class="n">off_mem_rsvmap</span><span class="p">;</span>
    <span class="kt">uint32_t</span> <span class="n">version</span><span class="p">;</span>
    <span class="kt">uint32_t</span> <span class="n">last_comp_version</span><span class="p">;</span>
    <span class="kt">uint32_t</span> <span class="n">boot_cpuid_phys</span><span class="p">;</span>
    <span class="kt">uint32_t</span> <span class="n">size_dt_strings</span><span class="p">;</span>
    <span class="kt">uint32_t</span> <span class="n">size_dt_struct</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">magic</span></code></dt>
<dd>This field shall contain the value 0xd00dfeed (big-endian).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">totalsize</span></code></dt>
<dd>This field shall contain the total size in bytes of the devicetree data structure.
This size shall encompass all sections of the structure:
the header, the memory reservation block, structure block and
strings block, as well as any free space gaps between the blocks or
after the final block.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">off_dt_struct</span></code></dt>
<dd>This field shall contain the offset in bytes of the structure block
(see section <a class="reference internal" href="#sect-fdt-structure-block"><span class="std std-ref">5.4</span></a>) from the beginning of the header.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">off_dt_strings</span></code></dt>
<dd>This field shall contain the offset in bytes of the strings block
(see section <a class="reference internal" href="#sect-fdt-strings-block"><span class="std std-ref">5.5</span></a>) from the beginning of the header.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">off_mem_rsvmap</span></code></dt>
<dd>This field shall contain the offset in bytes of the memory
reservation block (see section <a class="reference internal" href="#sect-fdt-memory-reservation-block"><span class="std std-ref">5.3</span></a>)
from the beginning of the header.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">version</span></code></dt>
<dd>This field shall contain the version of the devicetree data
structure. The version is 17 if using the structure as defined in
this document. An DTSpec boot program may provide the devicetree of
a later version, in which case this field shall contain the version
number defined in whichever later document gives the details of that
version.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">last_comp_version</span></code></dt>
<dd>This field shall contain the lowest version of the devicetree data
structure with which the version used is backwards compatible. So,
for the structure as defined in this document (version 17), this
field shall contain 16 because version 17 is backwards compatible
with version 16, but not earlier versions. As per section
<a class="reference internal" href="#sect-fdt-versioning"><span class="std std-ref">5.1</span></a>, a DTSpec boot program should provide a
devicetree in a format which is backwards compatible with version
16, and thus this field shall always contain 16.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">boot_cpuid_phys</span></code></dt>
<dd>This field shall contain the physical ID of the system’s boot CPU.
It shall be identical to the physical ID given in the <code class="docutils literal notranslate"><span class="pre">reg</span></code> property
of that CPU node within the devicetree.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_dt_strings</span></code></dt>
<dd>This field shall contain the length in bytes of the strings block
section of the devicetree blob.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_dt_struct</span></code></dt>
<dd>This field shall contain the length in bytes of the structure block
section of the devicetree blob.</dd>
</dl>
</div>
<div class="section" id="memory-reservation-block">
<span id="sect-fdt-memory-reservation-block"></span><h3>5.3. Memory Reservation Block<a class="headerlink" href="#memory-reservation-block" title="Permalink to this headline">¶</a></h3>
<div class="section" id="purpose">
<h4>5.3.1. Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h4>
<p>The <em>memory reservation block</em> provides the client program with a list
of areas in physical memory which are <em>reserved</em>; that is, which shall
not be used for general memory allocations. It is used to protect vital
data structures from being overwritten by the client program. For
example, on some systems with an IOMMU, the TCE (translation control
entry) tables initialized by a DTSpec boot program would need to be
protected in this manner. Likewise, any boot program code or data used
during the client program’s runtime would need to be reserved (e.g.,
RTAS on Open Firmware platforms). DTSpec does not require the boot
program to provide any such runtime components, but it does not prohibit
implementations from doing so as an extension.</p>
<p>More specifically, a client program shall not access memory in a
reserved region unless other information provided by the boot program
explicitly indicates that it shall do so. The client program may then
access the indicated section of the reserved memory in the indicated
manner. Methods by which the boot program can indicate to the client
program specific uses for reserved memory may appear in this document,
in optional extensions to it, or in platform-specific documentation.</p>
<p>The reserved regions supplied by a boot program may, but are not
required to, encompass the devicetree blob itself. The client program
shall ensure that it does not overwrite this data structure before it is
used, whether or not it is in the reserved areas.</p>
<p>Any memory that is declared in a memory node and is accessed by the boot
program or caused to be accessed by the boot program after client entry
must be reserved. Examples of this type of access include (e.g.,
speculative memory reads through a non-guarded virtual page).</p>
<p>This requirement is necessary because any memory that is not reserved
may be accessed by the client program with arbitrary storage attributes.</p>
<p>Any accesses to reserved memory by or caused by the boot program must be
done as not Caching Inhibited and Memory Coherence Required (i.e., WIMG
= 0bx01x), and additionally for Book III-S implementations as not Write
Through Required (i.e., WIMG = 0b001x). Further, if the VLE storage
attribute is supported, all accesses to reserved memory must be done as
VLE=0.</p>
<p>This requirement is necessary because the client program is permitted to
map memory with storage attributes specified as not Write Through
Required, not Caching Inhibited, and Memory Coherence Required (i.e.,
WIMG = 0b001x), and VLE=0 where supported. The client program may use
large virtual pages that contain reserved memory. However, the client
program may not modify reserved memory, so the boot program may perform
accesses to reserved memory as Write Through Required where conflicting
values for this storage attribute are architecturally permissible.</p>
</div>
<div class="section" id="format">
<h4>5.3.2. Format<a class="headerlink" href="#format" title="Permalink to this headline">¶</a></h4>
<p>The memory reservation block consists of a list of pairs of 64-bit
big-endian integers, each pair being represented by the following C
structure.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">fdt_reserve_entry</span> <span class="p">{</span>
    <span class="kt">uint64_t</span> <span class="n">address</span><span class="p">;</span>
    <span class="kt">uint64_t</span> <span class="n">size</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Each pair gives the physical address and size in bytes of a reserved memory region.
These given regions shall not overlap each other. The list of
reserved blocks shall be terminated with an entry where both address and
size are equal to 0. Note that the address and size values are always
64-bit. On 32-bit CPUs the upper 32-bits of the value are ignored.</p>
<p>Each uint64_t in the memory reservation block, and thus the memory
reservation block as a whole, shall be located at an 8-byte aligned
offset from the beginning of the devicetree blob (see section
<a class="reference internal" href="#sect-fdt-alignment"><span class="std std-ref">5.6</span></a>).</p>
</div>
</div>
<div class="section" id="structure-block">
<span id="sect-fdt-structure-block"></span><h3>5.4. Structure Block<a class="headerlink" href="#structure-block" title="Permalink to this headline">¶</a></h3>
<p>The structure block describes the structure and contents of the devicetree
itself. It is composed of a sequence of tokens with data, as described below.
These are organized into a linear tree structure, as described below.</p>
<p>Each token in the structure block, and thus the structure block itself,
shall be located at a 4-byte aligned offset from the beginning of the
devicetree blob (see <a class="reference internal" href="#sect-fdt-alignment"><span class="std std-ref">5.6</span></a>).</p>
<div class="section" id="lexical-structure">
<span id="sect-fdt-lexical-structure"></span><h4>5.4.1. Lexical structure<a class="headerlink" href="#lexical-structure" title="Permalink to this headline">¶</a></h4>
<p>The structure block is composed of a sequence of pieces, each beginning
with a token, that is, a big-endian 32-bit integer. Some tokens are
followed by extra data, the format of which is determined by the token
value. All tokens shall be aligned on a 32-bit boundary, which may
require padding bytes (with a value of 0x0) to be inserted after the
previous token’s data.</p>
<p>The five token types are as follows:</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">FDT_BEGIN_NODE</span></code> (0x00000001)</dt>
<dd>The FDT_BEGIN_NODE token marks the beginning of a node’s
representation. It shall be followed by the node’s unit name as
extra data. The name is stored as a null-terminated string, and
shall include the unit address (see section <a class="reference internal" href="index.html#sect-node-names"><span class="std std-ref">2.2.1</span></a>), if any.
The node name is followed by zeroed padding bytes, if necessary for
alignment, and then the next token, which may be any token except
FDT_END.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">FDT_END_NODE</span></code> (0x00000002)</dt>
<dd>The FDT_END_NODE token marks the end of a node’s representation.
This token has no extra data; so it is followed immediately by the
next token, which may be any token except FDT_PROP.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">FDT_PROP</span></code> (0x00000003)</dt>
<dd><p class="first">The FDT_PROP token marks the beginning of the representation of one
property in the devicetree. It shall be followed by extra data
describing the property. This data consists first of the property’s
length and name represented as the following C structure:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="p">{</span>
    <span class="kt">uint32_t</span> <span class="n">len</span><span class="p">;</span>
    <span class="kt">uint32_t</span> <span class="n">nameoff</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Both the fields in this structure are 32-bit big-endian integers.</p>
<ul class="simple">
<li>len gives the length of the property’s value in bytes (which may be
zero, indicating an empty property, see section <a class="reference internal" href="index.html#sect-property-values"><span class="std std-ref">2.2.4.2</span></a>).</li>
<li>nameoff gives an offset into the strings block
(see section <a class="reference internal" href="#sect-fdt-strings-block"><span class="std std-ref">5.5</span></a>)
at which the property’s name is stored as a null-terminated string.</li>
</ul>
<p class="last">After this structure, the property’s value is given as a byte string of
length len. This value is followed by zeroed padding bytes (if
necessary) to align to the next 32-bit boundary and then the next token,
which may be any token except FDT_END.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">FDT_NOP</span></code> (0x00000004)</dt>
<dd>The FDT_NOP token will be ignored by any program parsing the device
tree. This token has no extra data; so it is followed immediately by
the next token, which can be any valid token. A property or node
definition in the tree can be overwritten with FDT_NOP tokens to
remove it from the tree without needing to move other sections of
the tree’s representation in the devicetree blob.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">FDT_END</span></code> (0x00000009)</dt>
<dd>The FDT_END token marks the end of the structure block. There shall
be only one FDT_END token, and it shall be the last token in the
structure block. It has no extra data; so the byte immediately after
the FDT_END token has offset from the beginning of the structure
block equal to the value of the size_dt_struct field in the device
tree blob header.</dd>
</dl>
</div>
<div class="section" id="tree-structure">
<h4>5.4.2. Tree structure<a class="headerlink" href="#tree-structure" title="Permalink to this headline">¶</a></h4>
<p>The devicetree structure is represented as a linear tree: the
representation of each node begins with an FDT_BEGIN_NODE token and
ends with an FDT_END_NODE token. The node’s properties and subnodes
(if any) are represented before the FDT_END_NODE, so that the
FDT_BEGIN_NODE and FDT_END_NODE tokens for those subnodes are nested
within those of the parent.</p>
<p>The structure block as a whole consists of the root node’s
representation (which contains the representations for all other nodes),
followed by an FDT_END token to mark the end of the structure block as
a whole.</p>
<p>More precisely, each node’s representation consists of the following
components:</p>
<ul>
<li><p class="first">(optionally) any number of FDT_NOP tokens</p>
</li>
<li><p class="first">FDT_BEGIN_NODE token</p>
<blockquote>
<div><ul class="simple">
<li>The node’s name as a null-terminated string</li>
<li>[zeroed padding bytes to align to a 4-byte boundary]</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">For each property of the node:</p>
<blockquote>
<div><ul>
<li><p class="first">(optionally) any number of FDT_NOP tokens</p>
</li>
<li><p class="first">FDT_PROP token</p>
<blockquote>
<div><ul class="simple">
<li>property information as given in section <a class="reference internal" href="#sect-fdt-lexical-structure"><span class="std std-ref">5.4.1</span></a></li>
<li>[zeroed padding bytes to align to a 4-byte boundary]</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Representations of all child nodes in this format</p>
</li>
<li><p class="first">(optionally) any number of FDT_NOP tokens</p>
</li>
<li><p class="first">FDT_END_NODE token</p>
</li>
</ul>
<p>Note that this process requires that all property definitions for a
particular node precede any subnode definitions for that node. Although
the structure would not be ambiguous if properties and subnodes were
intermingled, the code needed to process a flat tree is simplified by
this requirement.</p>
</div>
</div>
<div class="section" id="strings-block">
<span id="sect-fdt-strings-block"></span><h3>5.5. Strings Block<a class="headerlink" href="#strings-block" title="Permalink to this headline">¶</a></h3>
<p>The strings block contains strings representing all the property names
used in the tree. These null terminated strings are simply concatenated
together in this section, and referred to from the structure block by an
offset into the strings block.</p>
<p>The strings block has no alignment constraints and may appear at any
offset from the beginning of the devicetree blob.</p>
</div>
<div class="section" id="alignment">
<span id="sect-fdt-alignment"></span><h3>5.6. Alignment<a class="headerlink" href="#alignment" title="Permalink to this headline">¶</a></h3>
<p>For the data in the memory reservation and structure blocks to be used
without unaligned memory accesses, they shall lie at suitably aligned
memory addresses. Specifically, the memory reservation block shall be
aligned to an 8-byte boundary and the structure block to a 4-byte
boundary.</p>
<p>Furthermore, the devicetree blob as a whole can be relocated without
destroying the alignment of the subblocks.</p>
<p>As described in the previous sections, the structure and strings blocks
shall have aligned offsets from the beginning of the devicetree blob.
To ensure the in-memory alignment of the blocks, it is sufficient to
ensure that the devicetree as a whole is loaded at an address aligned
to the largest alignment of any of the subblocks, that is, to an 8-byte
boundary. A DTSpec compliant boot
program shall load the devicetree blob at such an aligned address
before passing it to the client program. If an DTSpec client program
relocates the devicetree blob in memory, it should only do so to
another 8-byte aligned address.</p>
</div>
</div>
<span id="document-source-language"></span><div class="section" id="devicetree-source-dts-format-version-1">
<span id="chapter-devicetree-source-format"></span><h2>6. Devicetree Source (DTS) Format (version 1)<a class="headerlink" href="#devicetree-source-dts-format-version-1" title="Permalink to this headline">¶</a></h2>
<p>The Devicetree Source (DTS) format is a textual representation of a
devicetree in a form that can be processed by dtc into a binary
devicetree in the form expected by the kernel. The following description is
not a formal syntax definition of DTS, but describes the basic
constructs used to represent devicetrees.</p>
<p>The name of DTS files should end with “.dts”.</p>
<div class="section" id="compiler-directives">
<h3>6.1. Compiler directives<a class="headerlink" href="#compiler-directives" title="Permalink to this headline">¶</a></h3>
<p>Other source files can be included from a DTS file.  The name of include
files should end with “.dtsi”.  Included files can in turn include
additional files.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/include/ &quot;FILE&quot;
</pre></div>
</div>
</div>
<div class="section" id="labels">
<h3>6.2. Labels<a class="headerlink" href="#labels" title="Permalink to this headline">¶</a></h3>
<p>The source format allows labels to be attached to any node or property value in the devicetree.
Phandle and path references can be automatically generated by referencing a label instead of
explicitly specifying a phandle value or the full path to a node.
Labels are only used in the devicetree source format and are not encoded into the DTB binary.</p>
<p>A label shall be between 1 to 31 characters in length,
be composed only of the characters in the set <a class="reference internal" href="#label-characters"><span class="std std-numref">Table 6.1</span></a>,
and must not start with a number.</p>
<p>Labels are created by appending a colon (‘:’) to the label name.
References are created by prefixing the label name with an ampersand (‘&amp;’).</p>
<span id="label-characters"></span><table border="1" class="docutils" id="id1">
<caption><span class="caption-number">Table 6.1 </span><span class="caption-text">Valid characters for DTS labels</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Character</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">0-9</span></code></td>
<td>digit</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">a-z</span></code></td>
<td>lowercase letter</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">A-Z</span></code></td>
<td>uppercase letter</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">_</span></code></td>
<td>underscore</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="node-and-property-definitions">
<h3>6.3. Node and property definitions<a class="headerlink" href="#node-and-property-definitions" title="Permalink to this headline">¶</a></h3>
<p>Devicetree nodes are defined with a node name and unit address with
braces marking the start and end of the node definition. They may be
preceded by a label.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[label:] node-name[@unit-address] {
    [properties definitions]
    [child nodes]
};
</pre></div>
</div>
<p>Nodes may contain property definitions and/or child node definitions. If
both are present, properties shall come before child nodes.</p>
<p>Previously defined nodes may be deleted.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/delete-node/ node-name;
/delete-node/ &amp;label;
</pre></div>
</div>
<p>Property definitions are name value pairs in the form:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[label:] property-name = value;
</pre></div>
</div>
<p>except for properties with empty (zero length) value which have the
form:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[label:] property-name;
</pre></div>
</div>
<p>Previously defined properties may be deleted.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/delete-property/ property-name;
</pre></div>
</div>
<p>Property values may be defined as an array of 32-bit integer cells, as
null-terminated strings, as bytestrings or a combination of these.</p>
<ul class="simple">
<li>Arrays of cells are represented by angle brackets surrounding a space
separated list of C-style integers. Example:</li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>interrupts = &lt;17 0xc&gt;;
</pre></div>
</div>
<ul class="simple">
<li>values may be represented as arithmetic, bitwise, or logical expressions
within parenthesis.</li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Arithmetic operators

+   add
-   subtract
*   multiply
/   divide
%   modulo
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Bitwise operators

&amp;    and
|    or
^    exclusive or
~    not
&lt;&lt;  left shift
&gt;&gt;  right shift
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Logical operators

&amp;&amp;   and
||   or
!    not
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Relational operators

&lt;    less than
&gt;    greater than
&lt;=   less than or equal
&gt;=   greater than or equal
==   equal
!=   not equal
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Ternary operators

?:   (condition ? value_if_true : value_if_false)
</pre></div>
</div>
<ul class="simple">
<li>A 64-bit value is represented with two 32-bit cells. Example:</li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>clock-frequency = &lt;0x00000001 0x00000000&gt;;
</pre></div>
</div>
<ul class="simple">
<li>A null-terminated string value is represented using double quotes
(the property value is considered to include the terminating NULL
character). Example:</li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>compatible = &quot;simple-bus&quot;;
</pre></div>
</div>
<ul class="simple">
<li>A bytestring is enclosed in square brackets [ ] with each byte
represented by two hexadecimal digits. Spaces between each byte are
optional. Example:</li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>local-mac-address = [00 00 12 34 56 78];
</pre></div>
</div>
<p>or equivalently:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>local-mac-address = [000012345678];
</pre></div>
</div>
<ul class="simple">
<li>Values may have several comma-separated components, which are
concatenated together. Example:</li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>compatible = &quot;ns16550&quot;, &quot;ns8250&quot;;
example = &lt;0xf00f0000 19&gt;, &quot;a strange property format&quot;;
</pre></div>
</div>
<ul class="simple">
<li>In a cell array a reference to another node will be expanded to that
node’s phandle. References may be &amp; followed by a node’s label.
Example:</li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>interrupt-parent = &lt; &amp;mpic &gt;;
</pre></div>
</div>
<p>or they may be &amp; followed by a node’s full path in braces. Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>interrupt-parent = &lt; &amp;{/soc/interrupt-controller@40000} &gt;;
</pre></div>
</div>
<ul class="simple">
<li>Outside a cell array, a reference to another node will be expanded to
that node’s full path. Example:</li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethernet0 = &amp;EMAC0;
</pre></div>
</div>
<ul class="simple">
<li>Labels may also appear before or after any component of a property
value, or between cells of a cell array, or between bytes of a
bytestring. Examples:</li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>reg = reglabel: &lt;0 sizelabel: 0x1000000&gt;;
prop = [ab cd ef byte4: 00 ff fe];
str = start: &quot;string value&quot; end: ;
</pre></div>
</div>
</div>
<div class="section" id="file-layout">
<h3>6.4. File layout<a class="headerlink" href="#file-layout" title="Permalink to this headline">¶</a></h3>
<p><strong>Version 1 DTS files have the overall layout:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/dts-v1/;
[memory reservations]
    / {
        [property definitions]
        [child nodes]
    };
</pre></div>
</div>
<p>The /dts-v1/; shall be present to identify the file as a version 1 DTS
(dts files without this tag will be treated by dtc as being in the
obsolete version 0, which uses a different format for integers in
addition to other small but incompatible changes).</p>
<p>Memory reservations define an entry for the devicetree blob’s memory
reservation table. They have the form: e.g., /memreserve/ &lt;address&gt;
&lt;length&gt;; Where &lt;address&gt; and &lt;length&gt; are 64-bit C-style integers.</p>
<ul class="simple">
<li>The / { }; section defines the root node of the devicetree.</li>
<li>C style (/* … */) and C++ style (//) comments are supported.</li>
</ul>
</div>
</div>
<span id="document-references"></span><table class="docutils citation" frame="void" id="b1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[b1]</td><td><em>Power ISA™</em>, Version 2.06 Revision B, July 23, 2010. It is
available from power.org (<a class="reference external" href="http://power.org">http://power.org</a>)</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="ieee1275" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[IEEE1275]</td><td><em>Boot (Initialization Configuration) Firmware: Core Requirements
and Practices</em>, 1994, This is the core standard (also known as IEEE
1275) that defines the devicetree concept adopted by the DTSpec and
ePAPR. It is available from Global Engineering (<a class="reference external" href="http://global.ihs.com/">http://global.ihs.com/</a>).</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="b3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[b3]</td><td><em>PowerPC Processor Binding to IEEE 1275-1994 Standard for Boot
(Initialization, Configuration) Firmware</em>, Version 2.1, Open Firmware
Working Group,
(<a class="reference external" href="http://playground.sun.com/1275/bindings/ppc/release/ppc-2_1.html">http://playground.sun.com/1275/bindings/ppc/release/ppc-2_1.html</a>),
1996, This document specifies the PowerPC processor specific binding
to the base standard.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="b4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[b4]</td><td><em>booting-without-of.txt</em>, Ben Herrenschmidt, Becky Bruce, et
al., From the Linux kernel source tree (<a class="reference external" href="http://www.kernel.org/">http://www.kernel.org/</a>),
Describes the devicetree as used by the Linux kernel.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="b5" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[b5]</td><td><em>Device Trees Everywhere</em>, David Gibson and Ben Herrenschmidt
(<a class="reference external" href="http://ozlabs.org/~dgibson/home/papers/dtc-paper.pdf">http://ozlabs.org/~dgibson/home/papers/dtc-paper.pdf</a>), An overview
of the concept of the devicetree and devicetree compiler.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="b6" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[b6]</td><td><em>PCI Bus Binding to: IEEE Std 1275-1994 Standard for Boot
(Initialization Configuration) Firmware</em>, Revision 2.1, Open Firmware
Working Group, 1998
(<a class="reference external" href="http://playground.sun.com/1275/bindings/pci/pci2_1.pdf">http://playground.sun.com/1275/bindings/pci/pci2_1.pdf</a>)</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="b7" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[b7]</td><td><em>Open Firmware Recommended Practice: Interrupt Mapping</em>, Version
0.9, Open Firmware Working Group, 1996
(<a class="reference external" href="http://playground.sun.com/1275/practice/imap/imap0_9d.pdf">http://playground.sun.com/1275/practice/imap/imap0_9d.pdf</a>)</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="b8" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[b8]</td><td><em>Open Firmware Recommended Practice: Device Support Extensions</em>,
Version 1.0, Open Firmware Working Group, 1997,
(<a class="reference external" href="http://playground.sun.com/1275/practice/devicex/dse1_0a.html">http://playground.sun.com/1275/practice/devicex/dse1_0a.html</a>) This
document describes the binding for various device types such as
network, RTC, keyboard, sound, etc.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="b9" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[b9]</td><td><em>Open Firmware Recommended Practice: Universal Serial Bus
Binding to IEEE 1275</em>, Version 1, Open Firmware Working Group, 1998
(<a class="reference external" href="http://playground.sun.com/1275/bindings/usb/usb-1_0.ps">http://playground.sun.com/1275/bindings/usb/usb-1_0.ps</a>)</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="chrp" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[CHRP]</td><td><em>PowerPC Microprocessor Common Hardware Reference Platform
(CHRP) Binding</em>, Version 1.8, Open Firmware Working Group, 1998
(<a class="reference external" href="http://playground.sun.com/1275/bindings/chrp/chrp1_8a.ps">http://playground.sun.com/1275/bindings/chrp/chrp1_8a.ps</a>). This
document specifies the properties for Open PIC-compatible interrupt
controllers.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="b11" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[b11]</td><td><em>CHRP ISA Interrupt Controller Device Binding</em>, Unapproved
Draft version 1.1, Open Firmware Working Group, Aug 19, 1996
(<a class="reference external" href="http://playground.sun.com/1275/bindings/devices/postscript/isa-pic-1_1d.ps">http://playground.sun.com/1275/bindings/devices/postscript/isa-pic-1_1d.ps</a>)</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="b12" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[b12]</td><td><em>The Open Programmable Interrupt Controller (PIC) Register
Interface Specification</em>, Revision 1.2, Advanced Micro Devices and
Cyrix Corporation, October 1995</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="b13" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[b13]</td><td><em>PCI Local Bus Specification</em>, Revision 2.2, PCI Special
Interest Group</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="b14" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[b14]</td><td><em>PCI Express Base Specification</em>, Revision 1.0a, PCI Special
Interest Group</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="b15" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[b15]</td><td><em>PCI-Express Binding to OF</em>, P1275 Openboot Working Group
Proposal, 18 August 2004</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="papr" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[PAPR]</td><td><em>Power.org Standard for Power Architecture Platform
Requirements</em>, power.org</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="b17" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[b17]</td><td><em>System V Application Binary Interface, Edition 4.1</em>, Published
by The Santa Cruz Operation, Inc., 1997</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="b18" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[b18]</td><td><em>The Open Programmable Interrupt Controller (PIC) Register
Interface Specification Revision 1.2</em>, AMD and Cyrix, October 1995</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="b19" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[b19]</td><td><em>RFC 2119, Key words for use in RFCs to Indicate Requirement
Levels</em>, <a class="reference external" href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a></td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="b20" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[b20]</td><td><em>64-bit PowerPC ELF Application Binary Interface Supplement
1.9</em>, Ian Lance Taylor, 2004</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="epapr" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[EPAPR]</td><td><em>Power.org Standard for Embedded Power Architecture
Platform Requirements</em>, power.org, 2011,
<a class="reference external" href="https://www.power.org/documentation/power-org-standard-for-embedded-power-architecture-platform-requirements-epapr-v1-1-2/">https://www.power.org/documentation/power-org-standard-for-embedded-power-architecture-platform-requirements-epapr-v1-1-2/</a></td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="armv8" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[ARMv8]</td><td><em>ARM DDI 0487 ARM(c) Architecture Reference Manual,
ARMv8 for ARMv8-A architecture profile</em>, ARM,
<a class="reference external" href="http://infocenter.arm.com/help/topic/com.arm.doc.ddi0487a.h/index.html">http://infocenter.arm.com/help/topic/com.arm.doc.ddi0487a.h/index.html</a></td></tr>
</tbody>
</table>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html#document-index">
              <img class="logo" src="_static/devicetree-logo.svg" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="index.html#document-index">Devicetree Specification</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=devicetree-org&repo=devicetree-specification&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-introduction">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-devicetree-basics">2. The Devicetree</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-devicenodes">3. Device Node Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-device-bindings">4. Device Bindings</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-flattened-format">5. Flattened Devicetree (DTB) Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-source-language">6. Devicetree Source (DTS) Format (version 1)</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html#document-index">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016,2017, devicetree.org.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>